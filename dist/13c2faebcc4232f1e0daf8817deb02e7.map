{"version":3,"sources":["../node_modules/hyperapp/src/index.js","lib/combine-modules.js","../node_modules/classcat/src/index.js","const.js","keyboard.js","lib/decorator.js","selection.js","playback.js","sequencer.js","voices.js","option-button-set.js","synth.js","soundbank.js","main.js","index.js","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["h","app","name","attributes","node","rest","children","length","arguments","push","pop","nodeName","key","state","actions","view","container","renderLock","invokeLaterStack","rootElement","oldNode","toVNode","map","globalState","clone","wiredActions","scheduleRender","wireStateToActions","element","toLowerCase","call","childNodes","nodeType","nodeValue","render","next","patch","setTimeout","target","source","obj","i","set","path","value","slice","get","action","data","then","concat","getKey","setElementProp","isSVG","oldValue","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldProps","onupdate","removeChildren","ondestroy","removeElement","parent","cb","done","removeChild","onremove","nextSibling","insertBefore","oldElements","oldKeyed","newKeyed","oldChild","oldKey","j","newChild","newKey","recyledNode","combineModules","tree","modules","subviews","cat","classes","prefix","className","type","Array","isArray","len","hasOwnProperty","SEQUENCER_LENGTH","SEQUENCER_INTERVAL","NOTE_NAMES","KEYBOARD_KEYS","KEYBOARD_BLACK_KEYS","SYNTH_DEFAULTS","octave","oscillatorType","ampLevel","sustainLevel","attackTime","decayTime","releaseTime","filterCutoff","filterQ","OSCILLATOR_TYPES","TUNING_FREQ","TUNING_NOTE","isBlack","indexOf","char","noteForChar","n","Keyboard","pressed","attack","release","white","black","toUpperCase","init","onattack","onrelease","addEventListener","ev","preventDefault","note","stackHandlers","attr","handler","orig","fn","decorations","getDeco","child","class","substr","isSelected","row","col","start","r","column","end","applySelection","notes","rowvals","val","module","anchor","_set","x","onselectcolumn","reset","select","Decorator","onmousedown","onmouseup","onmouseover","playing","interval","onplayrow","onstop","setRow","play","setInterval","stop","clearInterval","PlayButton","StopButton","currentTarget","classList","add","remove","noteName","selection","playback","keys","onselectvoice","onattackvoice","window","setNote","playRow","forEach","views","Controls","Sequencer","vals","noteToHz","Math","exp","log","ctx","AudioContext","webkitAudioContext","Instrument","oscillator","createOscillator","filter","createBiquadFilter","envelope","createGain","amplifier","connect","destination","gain","props","frequency","Q","freq","t","currentTime","cancelScheduledValues","linearRampToValueAtTime","instruments","options","active","opt","Control","label","ControlSlider","min","max","step","ControlOptions","o","current","voice","controlProps","ControlPanel","A","B","C","D","E","F","G","H","selected","onselect","_","attackCurrent","releaseCurrent","stopAll","split","v","Selector","sequencer","keyboard","soundbank","f","s","body","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","Date","now","parentNode","cssTimeout","reloadCSS","links","querySelectorAll"],"mappings":"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","file":"13c2faebcc4232f1e0daf8817deb02e7.map","sourcesContent":["export function h(name, attributes /*, ...rest*/) {\n  var node\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    if ((node = rest.pop()) && node.pop /* Array? */) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var renderLock\n  var invokeLaterStack = []\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && toVNode(rootElement, [].map)\n  var globalState = clone(state)\n  var wiredActions = clone(actions)\n\n  scheduleRender(wireStateToActions([], globalState, wiredActions))\n\n  return wiredActions\n\n  function toVNode(element, map) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : toVNode(element, map)\n      })\n    }\n  }\n\n  function render() {\n    renderLock = !renderLock\n\n    var next = view(globalState, wiredActions)\n    if (container && !renderLock) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = next))\n    }\n\n    while ((next = invokeLaterStack.pop())) next()\n  }\n\n  function scheduleRender() {\n    if (!renderLock) {\n      renderLock = !renderLock\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var obj = {}\n\n    for (var i in target) obj[i] = target[i]\n    for (var i in source) obj[i] = source[i]\n\n    return obj\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    for (var i = 0; i < path.length; i++) {\n      source = source[path[i]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              if (typeof (data = action(data)) === \"function\") {\n                data = data(get(path, globalState), actions)\n              }\n\n              if (\n                data &&\n                data !== (state = get(path, globalState)) &&\n                !data.then // Promise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, clone(state, data), globalState))\n                )\n              }\n\n              return data\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = state[key] || {}),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function setElementProp(element, name, value, isSVG, oldValue) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        element[name][i] = value == null || value[i] == null ? \"\" : value[i]\n      }\n    } else {\n      if (typeof value === \"function\" || (name in element && !isSVG)) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSVG) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSVG = isSVG || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    if (node.attributes) {\n      if (node.attributes.oncreate) {\n        invokeLaterStack.push(function() {\n          node.attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(createElement(node.children[i], isSVG))\n      }\n\n      for (var name in node.attributes) {\n        setElementProp(element, name, node.attributes[name], isSVG)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldProps, attributes, isSVG) {\n    for (var name in clone(oldProps, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldProps[name])\n      ) {\n        setElementProp(element, name, attributes[name], isSVG, oldProps[name])\n      }\n    }\n\n    if (attributes.onupdate) {\n      invokeLaterStack.push(function() {\n        attributes.onupdate(element, oldProps)\n      })\n    }\n  }\n\n  function removeChildren(element, node, attributes) {\n    if ((attributes = node.attributes)) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node, cb) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    if (node.attributes && (cb = node.attributes.onremove)) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (node === oldNode) {\n    } else if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.nodeName && node.nodeName === oldNode.nodeName) {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSVG = isSVG || node.nodeName === \"svg\")\n      )\n\n      var oldElements = []\n      var oldKeyed = {}\n      var newKeyed = {}\n\n      for (var i = 0; i < oldNode.children.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElements[i], oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < node.children.length) {\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        var newKey = getKey(newChild)\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          var recyledNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, recyledNode[0], recyledNode[1], newChild, isSVG)\n            i++\n          } else if (recyledNode[0]) {\n            patch(\n              element,\n              element.insertBefore(recyledNode[0], oldElements[i]),\n              recyledNode[1],\n              newChild,\n              isSVG\n            )\n          } else {\n            patch(element, oldElements[i], null, newChild, isSVG)\n          }\n\n          j++\n          newKeyed[newKey] = newChild\n        }\n      }\n\n      while (i < oldNode.children.length) {\n        var oldChild = oldNode.children[i]\n        if (getKey(oldChild) == null) {\n          removeElement(element, oldElements[i], oldChild)\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[oldKeyed[i][1].key]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    } else if (node.nodeName === oldNode.nodeName) {\n      element.nodeValue = node\n    } else {\n      element = parent.insertBefore(\n        createElement(node, isSVG),\n        (nextSibling = element)\n      )\n      removeElement(parent, nextSibling, oldNode)\n    }\n    return element\n  }\n}\n","export default function combineModules (tree) {\n    const modules = {}\n\n    for (let name in (tree.modules || {})) {\n        modules[name] = combineModules(tree.modules[name])\n    }\n\n    const state = tree.state || {}\n    const actions = tree.actions || {}\n\n    for (let name in modules) {\n        state[name] = modules[name].state || {}\n        actions[name] = modules[name].actions || {}\n    }\n\n    const view = (state, actions) => {\n        const subviews = {}\n        for (let name in modules) {\n            if (!modules[name].view) continue\n            subviews[name] = modules[name].view(\n                state[name],\n                actions[name]\n            )\n        }\n        return tree.view && tree.view(state, actions, subviews)\n    }\n\n    return {state, actions, view}\n}","export default function cat(classes, prefix) {\n  var value\n  var className = \"\"\n  var type = typeof classes\n\n  if ((classes && type === \"string\") || type === \"number\") {\n    return classes\n  }\n\n  prefix = prefix || \" \"\n\n  if (Array.isArray(classes) && classes.length) {\n    for (var i = 0, len = classes.length; i < len; i++) {\n      if ((value = cat(classes[i], prefix))) {\n        className += (className && prefix) + value\n      }\n    }\n  } else {\n    for (var i in classes) {\n      if (classes.hasOwnProperty(i) && (value = classes[i])) {\n        className +=\n          (className && prefix) +\n          i +\n          (typeof value === \"object\" ? cat(value, prefix + i) : \"\")\n      }\n    }\n  }\n\n  return className\n}\n","\nexport const SEQUENCER_LENGTH = 32\nexport const SEQUENCER_INTERVAL = 100\nexport const NOTE_NAMES = [\n    'C', 'C#', 'D', 'Eb',\n    'E', 'F', 'F#', 'G',\n    'Ab', 'A', 'Bb', 'B',\n    'C', 'C#', 'D', 'Eb',\n    'E', 'F', 'F#', 'G',\n    'Ab', 'A', 'Bb', 'B',\n    'C'\n]\nexport const KEYBOARD_KEYS = [\n    'z','s','x','d','c','v',\n    'g','b','h','n','j','m',\n    'q','2','w','3','e','r',\n    '5','t','6','y','7','u',\n    'i'\n]\n\nexport const KEYBOARD_BLACK_KEYS = [\n    's', 'd', 'g', 'h', 'j',\n    '2', '3', '5', '6', '7'\n]\n\nexport const SYNTH_DEFAULTS = {\n    octave: 4,\n    oscillatorType: 'triangle',\n    ampLevel: 0.3,\n    sustainLevel: 0.6,\n    attackTime: 0.02,\n    decayTime: 0.04,\n    releaseTime: 0.4,\n    filterCutoff: 7600,\n    filterQ: 10,\n}\n\n\nexport const OSCILLATOR_TYPES = ['sawtooth', 'square', 'triangle', 'sine']\n\nexport const TUNING_FREQ = 440;\nexport const TUNING_NOTE = 69;","import {h} from 'hyperapp'\nimport cc from 'classcat'\nimport {KEYBOARD_KEYS, KEYBOARD_BLACK_KEYS} from './const'\nconst isBlack  = char =>  KEYBOARD_BLACK_KEYS.indexOf(char) > -1\n\nconst noteForChar = function (char) {\n    const n = KEYBOARD_KEYS.indexOf(char)\n    return n > -1 ? n : null\n}\n\nconst Keyboard = ({pressed, attack, release}) => (\n    <div class=\"keyboard\" key=\"keyboard\">\n        {KEYBOARD_KEYS.map(char => (\n        <div\n            class={cc(['clav', {\n                white: !isBlack(char),\n                black: isBlack(char),\n                pressed: char === pressed,\n            }])}\n            onmousedown={ ev => attack(char) }\n            onmouseup={ ev => release(char) }\n        >\n            <span class=\"char\">{char.toUpperCase()}</span>\n        </div>\n        ))}\n    </div>\n)\n\nexport default {\n    state: {\n        pressed: null\n    },\n\n    actions: {\n        \n        init: ({onattack, onrelease}) => (state, actions) => {\n            addEventListener('keydown', ev => actions.attack(ev.key) && ev.preventDefault(true))\n            addEventListener('keyup', ev => actions.release(ev.key) && ev.preventDefault(true))\n            return {\n                onattack: onattack || (_ => {}),\n                onrelease: onrelease || (_ => {}),\n            }\n        },\n        \n        attack: char => state => {\n            const note = KEYBOARD_KEYS.indexOf(char)\n            if (note === -1) return\n            if (char === state.pressed) return\n            if (char !== state.pressed) state.onattack(note)\n            return {pressed: char}\n        },\n\n        release: char => state => {\n            const note = KEYBOARD_KEYS.indexOf(char)\n            if (note === -1) return\n            if (char !== state.pressed) return\n            if (char === state.pressed) state.onrelease(note)\n            return {pressed: null}\n        }\n    },\n\n    view: (state, actions) => ({\n        Keyboard: _ => Keyboard({\n            attack: actions.attack,\n            release: actions.release,\n            pressed: state.pressed,\n        })\n    })\n}\n","function stackHandlers (attr, name, handler) {\n    let orig = attr[name]\n    attr[name] = (!orig ? handler : (...args) => {\n        orig(...args)\n        fn(...args)\n    })\n}\n\nexport default getDeco => (attr, children) => {\n    const decorations = getDeco(attr)\n    return children.map(child => {\n        if (!child.attributes) return child\n        for (let name in decorations) {\n            if (name === 'class') {\n                child.attributes.class = child.attributes.class + ' ' + decorations.class\n            } else if (name.substr(0, 2) === 'on') {\n                stackHandlers(child.attributes, name, decorations[name])\n            } else {\n                child.attributes[name] = decorations[name]\n            }\n        }\n        return child\n    })\n}","import decorator from './lib/decorator'\n\nconst isSelected = (state, row, col) => {\n    if (state.start === null) return false\n    var r = (col === state.column && row >= state.start && row <= state.end)\n    return r\n}\n\nexport const applySelection = (state, notes, note) => {\n    if (state.start === null) return notes\n    return notes.map((rowvals, row) =>\n        rowvals.map((val, col) =>\n            isSelected(state, row, col) ? note : val\n        )\n    )\n}\n\nexport const module = _ => ({\n\n    state: {\n        anchor: null,\n        column: null,\n        start: null,\n        end: null\n    },\n\n    actions: {\n        _set: x => x,\n        init: ({onselectcolumn}) => (state, actions) => {\n            actions._set({onselectcolumn})\n            actions.reset()\n        },\n        start: ({row, col}) => state => {\n            state.onselectcolumn(col)\n            return {\n                anchor: row,\n                column: col,\n                start: row,\n                end: row,\n            }\n        },\n        select: ({row}) => state => {\n            if (state.anchor === null) return\n            return (row < state.anchor )\n            ? {start: row, end:state.anchor}\n            : {start: state.anchor, end: row}\n        },\n        end: ({row}) => ({anchor: null}),\n        reset: _ => ({\n            anchor: null,\n            column: null,\n            start: null,\n            end: null\n        })\n    },\n\n    view: (state, actions) => ({\n        Decorator: decorator(({row, col}) => ({\n            onmousedown: ev => {\n                ev.preventDefault(true)\n                actions.start({row, col})\n            },\n            onmouseup: ev => {\n                ev.preventDefault(true)\n                actions.end({row, col})\n            },\n            onmouseover: ev => {\n                ev.preventDefault(true)\n                actions.select({row, col})\n            },\n            class: isSelected(state, row, col) ? 'selected' : ''\n        }))\n    })\n})\n","import {h} from 'hyperapp'\nimport {SEQUENCER_INTERVAL, SEQUENCER_LENGTH} from './const'\n\nexport default _ => ({\n    state: {\n        playing: false,\n        interval: null,\n        row: null,\n    },\n\n    actions: {\n        init: ({onplayrow, onstop}) => ({onplayrow, onstop}),\n        setRow: row => ({row}),\n        next: _ => (state, actions) => {\n            var row = (state.row + 1) % SEQUENCER_LENGTH\n            state.onplayrow(row)\n            actions.setRow(row)\n        },\n        play: _ => (state, actions) => {\n            if (state.interval) return\n            actions.setRow((state.row || 0) - 1)\n            return ({playing: true, interval: setInterval(actions.next, SEQUENCER_INTERVAL)})\n        },\n        stop: _ => (state, actions) => {\n            state.interval && clearInterval(state.interval)\n            state.onstop()\n            return ({playing: false, interval: null})\n        }\n    },\n\n    view: (state, actions) => ({\n        PlayButton: _ => (\n            <button\n                onclick={actions.play}\n                class={state.interval && 'active'}\n            >\n                Play\n            </button>\n        ),\n        StopButton: _ => (\n            <button\n                onclick={actions.stop}\n                onmousedown={ev => ev.currentTarget.classList.add('active')}\n                onmouseup={ev => ev.currentTarget.classList.remove('active')}\n            >\n                Stop\n            </button>\n        ),\n    })\n})","import {h} from 'hyperapp'\nimport {NOTE_NAMES, SEQUENCER_INTERVAL, SEQUENCER_LENGTH} from './const'\nimport {module as selection, applySelection} from './selection'\nimport playback from './playback'\n\nconst noteName = note => {\n    return ((note === null) ? '' : NOTE_NAMES[note])\n}\n\n\n\nexport default {\n    modules: {\n        selection: selection(),\n        playback: playback(),\n    },\n    state: { notes: [...Array(SEQUENCER_LENGTH).keys()].map(_ => [...Array(8).keys()].map(_ => null)) },\n    actions: {\n\n        init: ({onselectvoice, onattackvoice, onstop}) => (state, actions) => {\n\n            window.addEventListener('keydown', ev => {\n                if (ev.key !== ' ') return\n                actions.setNote(null)\n            })\n\n            actions.selection.init({\n                onselectcolumn: col => onselectvoice('ABCDEFGH'[col])\n            })\n\n            actions.playback.init({\n                onplayrow: actions.playRow,\n                onstop,\n            })\n            return {onattackvoice}\n        },\n\n        setNote: note => (state, actions) => {\n            actions.selection.reset()\n            return { notes: applySelection(state.selection, state.notes, note) }\n        },\n\n        playRow: row => (state, actions) => {\n            state.notes[row].forEach((note, col) => state.onattackvoice('ABCDEFGH'[col], note))\n        },\n    },\n\n    view: (state, actions, views) => ({\n        Controls: _ => (\n            <span>\n                <views.playback.PlayButton />\n                <views.playback.StopButton />\n                <button onclick={_ => actions.setNote(null)}>X</button>\n            </span>\n        ),\n        Sequencer: _ => (\n            <table class=\"sequencer\">\n                {state.notes.map((vals, row) => (\n                    <tr>\n                        <td  onclick={_ => actions.playback.setRow(row)} class={\"time\" + (state.playback.row === row ? 'playing' : '')}>{row}</td>\n                        {vals.map((note, col) => (\n                            <views.selection.Decorator row={row} col={col}>\n                                <td class={state.playback.row === row ? 'playing' : false}>{noteName(note)}</td>\n                            </views.selection.Decorator>\n                        ))}\n                    </tr>\n                ))}\n            </table>\n        )\n    })\n}\n","import {TUNING_NOTE, TUNING_FREQ, SYNTH_DEFAULTS} from './const'\n\nfunction noteToHz (note, octave) {\n    return Math.exp ((octave * 12 + note  - TUNING_NOTE) * Math.log(2) / 12) * TUNING_FREQ;\n}\nconst ctx = new (window.AudioContext || window.webkitAudioContext)()\n\nclass Instrument {\n    \n    constructor () {\n        this.oscillator = ctx.createOscillator()\n        this.filter = ctx.createBiquadFilter()\n        this.envelope = ctx.createGain()\n        this.amplifier = ctx.createGain()\n\n        this.oscillator.connect(this.filter)\n        this.filter.connect(this.envelope)\n        this.envelope.connect(this.amplifier)\n        this.amplifier.connect(ctx.destination)\n        this.set(SYNTH_DEFAULTS)\n        this.envelope.gain.value = 0;\n        this.oscillator.start()\n    }\n\n    set (props) {\n        if (props.oscillatorType) this.oscillator.type = props.oscillatorType\n        if (props.filterCutoff)   this.filter.frequency.value = props.filterCutoff\n        if (props.filterQ)        this.filter.Q.value = props.filterQ\n        if (props.ampLevel)       this.amplifier.gain.value = props.ampLevel\n        if (props.attackTime)     this.attackTime = props.attackTime\n        if (props.decayTime)      this.decayTime = props.decayTime\n        if (props.sustainLevel)   this.sustainLevel = props.sustainLevel\n        if (props.octave)         this.octave = props.octave\n        if (props.releaseTime)    this.releaseTime = props.releaseTime\n    }\n\n    attack (note) {\n        const freq = noteToHz(note, this.octave)\n        var t = ctx.currentTime\n        this.oscillator.frequency.cancelScheduledValues(t)\n        this.envelope.gain.cancelScheduledValues(t)\n        t += 0.01\n        this.oscillator.frequency.linearRampToValueAtTime(freq, t)\n        this.envelope.gain.linearRampToValueAtTime(0, t)\n        t += this.attackTime\n        this.envelope.gain.linearRampToValueAtTime(1, t)\n        t += this.decayTime\n        this.envelope.gain.linearRampToValueAtTime(this.sustainLevel, t)    \n    }\n\n    release () { \n        var t = ctx.currentTime + 0.01\n        this.envelope.gain.cancelScheduledValues(t)\n        t += this.releaseTime\n        this.envelope.gain.linearRampToValueAtTime(0, t)\n    }\n}\n\nexport default {\n    instruments: {\n        'A': new Instrument(),\n        'B': new Instrument(),\n        'C': new Instrument(),\n        'D': new Instrument(),\n        'E': new Instrument(),\n        'F': new Instrument(),\n        'G': new Instrument(),\n        'H': new Instrument(),\n    },\n    attack(i, note) { this.instruments[i].attack(note) },\n    release(i) { this.instruments[i].release() },\n    set(i, props) {this.instruments[i].set(props)},\n}\n\n","import {h} from 'hyperapp'\nimport cc from 'classcat'\n\nexport default props => props.options.map(opt => (\n    <button\n        class={cc({active: opt.value === props.value})}\n        onclick={ev => props.set(opt.value)}\n    >\n        {opt.name}\n    </button>\n))\n","import {h} from 'hyperapp'\nimport {SYNTH_DEFAULTS, OSCILLATOR_TYPES} from './const'\nimport voices from './voices'\nimport OptionButtonSet from './option-button-set'\n\nconst ctx = new (window.AudioContext || window.webkitAudioContext)()\n\nconst Control = (props, children) => (\n    <p>\n        <span class=\"label\">{props.label}:</span>\n        {children}\n    </p>\n)\n\nconst ControlSlider = props => (\n    <Control label={props.label}>\n        <input\n            type=\"range\"\n            min={props.min || 0}\n            max={props.max}\n            step={props.step || 'any'}\n            value={props.value}\n            oninput={ev => props.set(+ev.currentTarget.value)}\n        />\n    </Control>\n)\n\nconst ControlOptions = props => (\n    <Control label={props.label}>\n        <OptionButtonSet\n            options={props.options.map(o => ({name: o, value: o}))}\n            value={props.value}\n            set={props.set}\n        />\n    </Control>\n)\n\nexport default voice => ({\n    state: {\n        ...SYNTH_DEFAULTS,\n        current: null,\n    },\n\n    actions: {\n        set: x => state => {\n            voices.set(voice, x)\n            return x\n        },\n        attack: note => (state, actions) => {\n            if (state.current === note) return\n            if (note === null) {\n                actions.release()\n                return\n            }\n            voices.attack(voice, note)\n            return {current: note}\n        },\n        release: _ => state => {\n            if (state.current === null) return \n            voices.release(voice)\n            return {current: null}\n        },\n    },\n\n    view: (state, actions, views) => {\n        const controlProps = name => ({\n            value: state[name],\n            set: x => actions.set({[name]: x})\n        })\n        return {\n            ControlPanel: _ => (\n                <div class=\"synth-panel\">\n                    <div class=\"col-1\">\n                        <ControlSlider  label=\"Octave\"     {...controlProps('octave')}         min={1} max={6} step={1} />\n                        <ControlOptions label=\"Oscillator\" {...controlProps('oscillatorType')} options={OSCILLATOR_TYPES} />\n                        <ControlSlider  label=\"Cutoff\"     {...controlProps('filterCutoff')}   min={60} max={7600} />\n                        <ControlSlider  label=\"Resonance\"  {...controlProps('filterQ')}        max={20} />\n                    </div>\n                    <div class=\"col-2\">\n                        <ControlSlider label=\"Attack time\"   {...controlProps('attackTime')}   max={0.2} />\n                        <ControlSlider label=\"Decay time\"    {...controlProps('decayTime')}    max={0.2} />\n                        <ControlSlider label=\"Sustain level\" {...controlProps('sustainLevel')} max={1.0} />\n                        <ControlSlider label=\"Release time\"  {...controlProps('releaseTime')}  max={1.0} />\n                        <ControlSlider label=\"Gain\"          {...controlProps('ampLevel')}     max={1.0} />\n                    </div>\n                </div>\n            )\n        }\n    }\n})\n","import {h} from 'hyperapp'\nimport synth from './synth'\nimport OptionButtonSet from './option-button-set'\n\nexport default {\n    modules: {\n        A: synth('A'),\n        B: synth('B'),\n        C: synth('C'),\n        D: synth('D'),\n        E: synth('E'),\n        F: synth('F'),\n        G: synth('G'),\n        H: synth('H'),\n    },\n    state: {selected: 'A'},\n    actions: {\n        init: ({onselect}) => ({onselect}),\n        select: x => ({selected: x}),\n        attack: ({voice, note}) => (_, actions) => actions[voice].attack(note),\n        attackCurrent: note => (state, actions) => actions[state.selected].attack(note),\n        releaseCurrent: note => (state, actions) => actions[state.selected].release(),\n        stopAll: _ => (_, actions) => { 'ABCDEFGH'.split('').forEach(v => actions[v].release() ) }\n    },\n    view: (state, actions, views) => ({\n        ControlPanel: views[state.selected].ControlPanel,\n        Selector: _ => (\n            <div class=\"voice-selector\">\n                <OptionButtonSet\n                    options={'ABCDEFGH'.split('').map(n => ({name: `Voice ${n}`, value:n}))}\n                    set={x => {\n                        actions.select(x)\n                        state.onselect(x)\n                    }}\n                    value={state.selected}\n                />\n            </div>\n        ),\n    })\n}","import {h} from 'hyperapp'\nimport './style.less'\n\nimport keyboard from './keyboard'\nimport sequencer from './sequencer'\nimport soundbank from './soundbank'\n\n\nexport default {\n    modules: {\n        sequencer,\n        keyboard,\n        soundbank,\n    },\n\n    actions: {\n        r: f => s => f(s),\n        init: _ => (_, actions) => {\n            actions.keyboard.init({\n                onattack: note => actions.r(state => {\n                    actions.soundbank.attackCurrent(note)\n                    actions.sequencer.setNote(note)        \n                }),\n                onrelease: note => actions.r(state => {\n                    actions.soundbank.releaseCurrent()\n                    actions.sequencer.setNote(null)        \n                }),\n            })\n\n            actions.sequencer.init({\n                onselectvoice: actions.soundbank.select,\n                onattackvoice: (voice, note) => actions.r(state => {\n                    //let keyboard override what the sequencer plays:\n                    if (voice === state.soundbank.selected && state.keyboard.pressed) return \n                    actions.soundbank.attack({voice, note})\n                }),\n                onstop: actions.soundbank.stopAll,\n            })\n\n            actions.soundbank.init({\n                onselect: actions.sequencer.selection.reset\n            })\n        },\n    },\n\n    view: (state, actions, views) => (\n        <div class=\"app-layout\">\n            <div class=\"app-layout-left\">\n                <div class=\"main-panel\">\n                    <views.sequencer.Controls />\n                    <views.soundbank.Selector />\n                    <views.soundbank.ControlPanel />\n                </div>\n                <views.keyboard.Keyboard />\n            </div>\n            <div class=\"app-layout-right\">\n                <views.sequencer.Sequencer />\n            </div>\n        </div>\n    )\n}","import {app} from 'hyperapp'\nimport combineModules from './lib/combine-modules'\nimport main from './main'\nconst {state, actions, view} = combineModules(main)\nconst {init} = app(state, actions, view, document.body)\ninit()\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}