{"dependencies":[{"name":"/Users/zache/Code/synth-sequencer/.babelrc","includedInParent":true,"mtime":1521074738409},{"name":"/Users/zache/Code/synth-sequencer/package.json","includedInParent":true,"mtime":1521132316933},{"name":"hyperapp","loc":{"line":1,"column":16}},{"name":"classcat","loc":{"line":2,"column":15}},{"name":"./const","loc":{"line":3,"column":49}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _hyperapp = require('hyperapp');\n\nvar _classcat = require('classcat');\n\nvar _classcat2 = _interopRequireDefault(_classcat);\n\nvar _const = require('./const');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar isBlack = function isBlack(char) {\n    return _const.KEYBOARD_BLACK_KEYS.indexOf(char) > -1;\n};\n\nvar noteForChar = function noteForChar(char) {\n    var n = _const.KEYBOARD_KEYS.indexOf(char);\n    return n > -1 ? n : null;\n};\n\nvar _Keyboard = function _Keyboard(_ref) {\n    var pressed = _ref.pressed,\n        attack = _ref.attack,\n        release = _ref.release;\n    return (0, _hyperapp.h)(\n        'div',\n        { 'class': 'keyboard', key: 'keyboard' },\n        _const.KEYBOARD_KEYS.map(function (char) {\n            return (0, _hyperapp.h)(\n                'div',\n                {\n                    'class': (0, _classcat2.default)(['clav', {\n                        white: !isBlack(char),\n                        black: isBlack(char),\n                        pressed: char === pressed\n                    }]),\n                    onmousedown: function onmousedown(ev) {\n                        return attack(char);\n                    },\n                    onmouseup: function onmouseup(ev) {\n                        return release(char);\n                    }\n                },\n                (0, _hyperapp.h)(\n                    'span',\n                    { 'class': 'char' },\n                    char.toUpperCase()\n                )\n            );\n        })\n    );\n};\n\nexports.default = {\n    state: {\n        pressed: null\n    },\n\n    actions: {\n\n        init: function init(_ref2) {\n            var onattack = _ref2.onattack,\n                onrelease = _ref2.onrelease;\n            return function (state, actions) {\n                addEventListener('keydown', function (ev) {\n                    return actions.attack(ev.key) && ev.preventDefault(true);\n                });\n                addEventListener('keyup', function (ev) {\n                    return actions.release(ev.key) && ev.preventDefault(true);\n                });\n                return {\n                    onattack: onattack || function (_) {},\n                    onrelease: onrelease || function (_) {}\n                };\n            };\n        },\n\n        attack: function attack(char) {\n            return function (state) {\n                var note = _const.KEYBOARD_KEYS.indexOf(char);\n                if (note === -1) return;\n                if (char === state.pressed) return;\n                if (char !== state.pressed) state.onattack(note);\n                return { pressed: char };\n            };\n        },\n\n        release: function release(char) {\n            return function (state) {\n                var note = _const.KEYBOARD_KEYS.indexOf(char);\n                if (note === -1) return;\n                if (char !== state.pressed) return;\n                if (char === state.pressed) state.onrelease(note);\n                return { pressed: null };\n            };\n        }\n    },\n\n    view: function view(state, actions) {\n        return {\n            Keyboard: function Keyboard(_) {\n                return _Keyboard({\n                    attack: actions.attack,\n                    release: actions.release,\n                    pressed: state.pressed\n                });\n            }\n        };\n    }\n};","map":{"mappings":[{"generated":{"line":7,"column":0},"source":"keyboard.js","original":{"line":1,"column":0}},{"generated":{"line":9,"column":0},"source":"keyboard.js","original":{"line":2,"column":0}},{"generated":{"line":13,"column":0},"source":"keyboard.js","original":{"line":3,"column":0}},{"generated":{"line":17,"column":0},"source":"keyboard.js","original":{"line":4,"column":0}},{"name":"isBlack","generated":{"line":17,"column":4},"source":"keyboard.js","original":{"line":4,"column":6}},{"generated":{"line":17,"column":14},"source":"keyboard.js","original":{"line":4,"column":17}},{"name":"isBlack","generated":{"line":17,"column":23},"source":"keyboard.js","original":{"line":4,"column":6}},{"generated":{"line":17,"column":30},"source":"keyboard.js","original":{"line":4,"column":17}},{"generated":{"line":18,"column":0},"source":"keyboard.js","original":{"line":4,"column":17}},{"generated":{"line":18,"column":11},"source":"keyboard.js","original":{"line":4,"column":26}},{"name":"indexOf","generated":{"line":18,"column":38},"source":"keyboard.js","original":{"line":4,"column":46}},{"generated":{"line":18,"column":45},"source":"keyboard.js","original":{"line":4,"column":26}},{"name":"char","generated":{"line":18,"column":46},"source":"keyboard.js","original":{"line":4,"column":54}},{"generated":{"line":18,"column":50},"source":"keyboard.js","original":{"line":4,"column":26}},{"generated":{"line":18,"column":54},"source":"keyboard.js","original":{"line":4,"column":62}},{"generated":{"line":18,"column":55},"source":"keyboard.js","original":{"line":4,"column":63}},{"generated":{"line":18,"column":56},"source":"keyboard.js","original":{"line":4,"column":17}},{"generated":{"line":19,"column":0},"source":"keyboard.js","original":{"line":4,"column":17}},{"generated":{"line":19,"column":1},"source":"keyboard.js","original":{"line":4,"column":0}},{"generated":{"line":21,"column":0},"source":"keyboard.js","original":{"line":6,"column":0}},{"name":"noteForChar","generated":{"line":21,"column":4},"source":"keyboard.js","original":{"line":6,"column":6}},{"generated":{"line":21,"column":18},"source":"keyboard.js","original":{"line":6,"column":20}},{"name":"noteForChar","generated":{"line":21,"column":27},"source":"keyboard.js","original":{"line":6,"column":6}},{"generated":{"line":21,"column":38},"source":"keyboard.js","original":{"line":6,"column":20}},{"name":"char","generated":{"line":21,"column":39},"source":"keyboard.js","original":{"line":6,"column":30}},{"generated":{"line":21,"column":43},"source":"keyboard.js","original":{"line":6,"column":20}},{"generated":{"line":21,"column":45},"source":"keyboard.js","original":{"line":6,"column":36}},{"generated":{"line":22,"column":0},"source":"keyboard.js","original":{"line":7,"column":4}},{"name":"n","generated":{"line":22,"column":8},"source":"keyboard.js","original":{"line":7,"column":10}},{"generated":{"line":22,"column":12},"source":"keyboard.js","original":{"line":7,"column":14}},{"name":"indexOf","generated":{"line":22,"column":33},"source":"keyboard.js","original":{"line":7,"column":28}},{"generated":{"line":22,"column":40},"source":"keyboard.js","original":{"line":7,"column":14}},{"name":"char","generated":{"line":22,"column":41},"source":"keyboard.js","original":{"line":7,"column":36}},{"generated":{"line":22,"column":45},"source":"keyboard.js","original":{"line":7,"column":14}},{"generated":{"line":22,"column":46},"source":"keyboard.js","original":{"line":7,"column":4}},{"generated":{"line":23,"column":0},"source":"keyboard.js","original":{"line":8,"column":4}},{"name":"n","generated":{"line":23,"column":11},"source":"keyboard.js","original":{"line":8,"column":11}},{"generated":{"line":23,"column":15},"source":"keyboard.js","original":{"line":8,"column":15}},{"generated":{"line":23,"column":16},"source":"keyboard.js","original":{"line":8,"column":16}},{"generated":{"line":23,"column":17},"source":"keyboard.js","original":{"line":8,"column":11}},{"name":"n","generated":{"line":23,"column":20},"source":"keyboard.js","original":{"line":8,"column":20}},{"generated":{"line":23,"column":21},"source":"keyboard.js","original":{"line":8,"column":11}},{"generated":{"line":23,"column":24},"source":"keyboard.js","original":{"line":8,"column":24}},{"generated":{"line":23,"column":28},"source":"keyboard.js","original":{"line":8,"column":4}},{"generated":{"line":24,"column":0},"source":"keyboard.js","original":{"line":9,"column":1}},{"generated":{"line":24,"column":1},"source":"keyboard.js","original":{"line":6,"column":0}},{"generated":{"line":26,"column":0},"source":"keyboard.js","original":{"line":11,"column":0}},{"name":"Keyboard","generated":{"line":26,"column":4},"source":"keyboard.js","original":{"line":11,"column":6}},{"generated":{"line":26,"column":16},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"Keyboard","generated":{"line":26,"column":25},"source":"keyboard.js","original":{"line":11,"column":6}},{"generated":{"line":26,"column":34},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":27,"column":0},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"pressed","generated":{"line":27,"column":8},"source":"keyboard.js","original":{"line":11,"column":19}},{"generated":{"line":27,"column":15},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"pressed","generated":{"line":27,"column":23},"source":"keyboard.js","original":{"line":11,"column":19}},{"generated":{"line":27,"column":30},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":28,"column":0},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"attack","generated":{"line":28,"column":8},"source":"keyboard.js","original":{"line":11,"column":28}},{"generated":{"line":28,"column":14},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"attack","generated":{"line":28,"column":22},"source":"keyboard.js","original":{"line":11,"column":28}},{"generated":{"line":28,"column":28},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":29,"column":0},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"release","generated":{"line":29,"column":8},"source":"keyboard.js","original":{"line":11,"column":36}},{"generated":{"line":29,"column":15},"source":"keyboard.js","original":{"line":11,"column":17}},{"name":"release","generated":{"line":29,"column":23},"source":"keyboard.js","original":{"line":11,"column":36}},{"generated":{"line":29,"column":30},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":30,"column":0},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":30,"column":11},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":31,"column":0},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":0},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":10},"source":"keyboard.js","original":{"line":12,"column":9}},{"generated":{"line":32,"column":19},"source":"keyboard.js","original":{"line":12,"column":15}},{"generated":{"line":32,"column":29},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":32,"column":31},"source":"keyboard.js","original":{"line":12,"column":26}},{"generated":{"line":32,"column":36},"source":"keyboard.js","original":{"line":12,"column":30}},{"generated":{"line":32,"column":46},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":33,"column":0},"source":"keyboard.js","original":{"line":13,"column":9}},{"name":"map","generated":{"line":33,"column":29},"source":"keyboard.js","original":{"line":13,"column":23}},{"generated":{"line":33,"column":32},"source":"keyboard.js","original":{"line":13,"column":9}},{"generated":{"line":33,"column":33},"source":"keyboard.js","original":{"line":13,"column":27}},{"generated":{"line":34,"column":0},"source":"keyboard.js","original":{"line":13,"column":27}},{"generated":{"line":34,"column":19},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":35,"column":0},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":36,"column":0},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":37,"column":0},"source":"keyboard.js","original":{"line":15,"column":12}},{"generated":{"line":37,"column":29},"source":"keyboard.js","original":{"line":15,"column":19}},{"generated":{"line":37,"column":53},"source":"keyboard.js","original":{"line":15,"column":22}},{"generated":{"line":37,"column":54},"source":"keyboard.js","original":{"line":15,"column":23}},{"generated":{"line":37,"column":60},"source":"keyboard.js","original":{"line":15,"column":22}},{"generated":{"line":37,"column":62},"source":"keyboard.js","original":{"line":15,"column":31}},{"name":"white","generated":{"line":38,"column":0},"source":"keyboard.js","original":{"line":16,"column":16}},{"generated":{"line":38,"column":31},"source":"keyboard.js","original":{"line":16,"column":23}},{"name":"isBlack","generated":{"line":38,"column":32},"source":"keyboard.js","original":{"line":16,"column":24}},{"name":"char","generated":{"line":38,"column":40},"source":"keyboard.js","original":{"line":16,"column":32}},{"generated":{"line":38,"column":44},"source":"keyboard.js","original":{"line":16,"column":24}},{"generated":{"line":38,"column":45},"source":"keyboard.js","original":{"line":15,"column":31}},{"name":"black","generated":{"line":39,"column":0},"source":"keyboard.js","original":{"line":17,"column":16}},{"name":"isBlack","generated":{"line":39,"column":31},"source":"keyboard.js","original":{"line":17,"column":23}},{"name":"char","generated":{"line":39,"column":39},"source":"keyboard.js","original":{"line":17,"column":31}},{"generated":{"line":39,"column":43},"source":"keyboard.js","original":{"line":17,"column":23}},{"generated":{"line":39,"column":44},"source":"keyboard.js","original":{"line":15,"column":31}},{"name":"pressed","generated":{"line":40,"column":0},"source":"keyboard.js","original":{"line":18,"column":16}},{"name":"char","generated":{"line":40,"column":33},"source":"keyboard.js","original":{"line":18,"column":25}},{"name":"pressed","generated":{"line":40,"column":42},"source":"keyboard.js","original":{"line":18,"column":34}},{"generated":{"line":41,"column":0},"source":"keyboard.js","original":{"line":15,"column":31}},{"generated":{"line":41,"column":21},"source":"keyboard.js","original":{"line":15,"column":22}},{"generated":{"line":41,"column":22},"source":"keyboard.js","original":{"line":15,"column":19}},{"generated":{"line":41,"column":23},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":42,"column":0},"source":"keyboard.js","original":{"line":20,"column":12}},{"generated":{"line":42,"column":33},"source":"keyboard.js","original":{"line":20,"column":26}},{"generated":{"line":43,"column":0},"source":"keyboard.js","original":{"line":20,"column":26}},{"name":"attack","generated":{"line":43,"column":31},"source":"keyboard.js","original":{"line":20,"column":32}},{"name":"char","generated":{"line":43,"column":38},"source":"keyboard.js","original":{"line":20,"column":39}},{"generated":{"line":43,"column":42},"source":"keyboard.js","original":{"line":20,"column":32}},{"generated":{"line":43,"column":43},"source":"keyboard.js","original":{"line":20,"column":26}},{"generated":{"line":44,"column":0},"source":"keyboard.js","original":{"line":20,"column":26}},{"generated":{"line":44,"column":21},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":45,"column":0},"source":"keyboard.js","original":{"line":21,"column":12}},{"generated":{"line":45,"column":31},"source":"keyboard.js","original":{"line":21,"column":24}},{"generated":{"line":46,"column":0},"source":"keyboard.js","original":{"line":21,"column":24}},{"name":"release","generated":{"line":46,"column":31},"source":"keyboard.js","original":{"line":21,"column":30}},{"name":"char","generated":{"line":46,"column":39},"source":"keyboard.js","original":{"line":21,"column":38}},{"generated":{"line":46,"column":43},"source":"keyboard.js","original":{"line":21,"column":30}},{"generated":{"line":46,"column":44},"source":"keyboard.js","original":{"line":21,"column":24}},{"generated":{"line":47,"column":0},"source":"keyboard.js","original":{"line":21,"column":24}},{"generated":{"line":48,"column":0},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":49,"column":0},"source":"keyboard.js","original":{"line":23,"column":12}},{"generated":{"line":50,"column":0},"source":"keyboard.js","original":{"line":23,"column":12}},{"generated":{"line":51,"column":0},"source":"keyboard.js","original":{"line":23,"column":12}},{"generated":{"line":51,"column":22},"source":"keyboard.js","original":{"line":23,"column":18}},{"generated":{"line":51,"column":31},"source":"keyboard.js","original":{"line":23,"column":24}},{"generated":{"line":51,"column":37},"source":"keyboard.js","original":{"line":23,"column":12}},{"name":"char","generated":{"line":52,"column":0},"source":"keyboard.js","original":{"line":23,"column":32}},{"name":"toUpperCase","generated":{"line":52,"column":25},"source":"keyboard.js","original":{"line":23,"column":37}},{"generated":{"line":52,"column":36},"source":"keyboard.js","original":{"line":23,"column":32}},{"generated":{"line":53,"column":0},"source":"keyboard.js","original":{"line":23,"column":12}},{"generated":{"line":54,"column":0},"source":"keyboard.js","original":{"line":14,"column":8}},{"generated":{"line":54,"column":13},"source":"keyboard.js","original":{"line":13,"column":27}},{"generated":{"line":55,"column":0},"source":"keyboard.js","original":{"line":13,"column":27}},{"generated":{"line":55,"column":9},"source":"keyboard.js","original":{"line":13,"column":9}},{"generated":{"line":56,"column":0},"source":"keyboard.js","original":{"line":12,"column":4}},{"generated":{"line":56,"column":5},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":57,"column":0},"source":"keyboard.js","original":{"line":11,"column":17}},{"generated":{"line":57,"column":1},"source":"keyboard.js","original":{"line":11,"column":0}},{"generated":{"line":59,"column":18},"source":"keyboard.js","original":{"line":29,"column":15}},{"name":"state","generated":{"line":60,"column":0},"source":"keyboard.js","original":{"line":30,"column":4}},{"generated":{"line":60,"column":11},"source":"keyboard.js","original":{"line":30,"column":11}},{"name":"pressed","generated":{"line":61,"column":0},"source":"keyboard.js","original":{"line":31,"column":8}},{"generated":{"line":61,"column":17},"source":"keyboard.js","original":{"line":31,"column":17}},{"generated":{"line":62,"column":0},"source":"keyboard.js","original":{"line":30,"column":11}},{"generated":{"line":62,"column":5},"source":"keyboard.js","original":{"line":29,"column":15}},{"name":"actions","generated":{"line":64,"column":0},"source":"keyboard.js","original":{"line":34,"column":4}},{"generated":{"line":64,"column":13},"source":"keyboard.js","original":{"line":34,"column":13}},{"name":"init","generated":{"line":66,"column":0},"source":"keyboard.js","original":{"line":36,"column":8}},{"generated":{"line":66,"column":14},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":67,"column":0},"source":"keyboard.js","original":{"line":36,"column":14}},{"name":"onattack","generated":{"line":67,"column":16},"source":"keyboard.js","original":{"line":36,"column":16}},{"generated":{"line":67,"column":24},"source":"keyboard.js","original":{"line":36,"column":14}},{"name":"onattack","generated":{"line":67,"column":33},"source":"keyboard.js","original":{"line":36,"column":16}},{"generated":{"line":67,"column":41},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":68,"column":0},"source":"keyboard.js","original":{"line":36,"column":14}},{"name":"onrelease","generated":{"line":68,"column":16},"source":"keyboard.js","original":{"line":36,"column":26}},{"generated":{"line":68,"column":25},"source":"keyboard.js","original":{"line":36,"column":14}},{"name":"onrelease","generated":{"line":68,"column":34},"source":"keyboard.js","original":{"line":36,"column":26}},{"generated":{"line":68,"column":43},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":69,"column":0},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":69,"column":19},"source":"keyboard.js","original":{"line":36,"column":41}},{"name":"state","generated":{"line":69,"column":29},"source":"keyboard.js","original":{"line":36,"column":42}},{"generated":{"line":69,"column":34},"source":"keyboard.js","original":{"line":36,"column":41}},{"name":"actions","generated":{"line":69,"column":36},"source":"keyboard.js","original":{"line":36,"column":49}},{"generated":{"line":69,"column":43},"source":"keyboard.js","original":{"line":36,"column":41}},{"generated":{"line":69,"column":45},"source":"keyboard.js","original":{"line":36,"column":61}},{"name":"addEventListener","generated":{"line":70,"column":0},"source":"keyboard.js","original":{"line":37,"column":12}},{"generated":{"line":70,"column":33},"source":"keyboard.js","original":{"line":37,"column":29}},{"generated":{"line":70,"column":42},"source":"keyboard.js","original":{"line":37,"column":12}},{"generated":{"line":70,"column":44},"source":"keyboard.js","original":{"line":37,"column":40}},{"generated":{"line":71,"column":0},"source":"keyboard.js","original":{"line":37,"column":40}},{"name":"actions","generated":{"line":71,"column":27},"source":"keyboard.js","original":{"line":37,"column":46}},{"name":"attack","generated":{"line":71,"column":35},"source":"keyboard.js","original":{"line":37,"column":54}},{"generated":{"line":71,"column":41},"source":"keyboard.js","original":{"line":37,"column":46}},{"name":"ev","generated":{"line":71,"column":42},"source":"keyboard.js","original":{"line":37,"column":61}},{"name":"key","generated":{"line":71,"column":45},"source":"keyboard.js","original":{"line":37,"column":64}},{"generated":{"line":71,"column":48},"source":"keyboard.js","original":{"line":37,"column":46}},{"name":"ev","generated":{"line":71,"column":53},"source":"keyboard.js","original":{"line":37,"column":72}},{"name":"preventDefault","generated":{"line":71,"column":56},"source":"keyboard.js","original":{"line":37,"column":75}},{"generated":{"line":71,"column":70},"source":"keyboard.js","original":{"line":37,"column":72}},{"generated":{"line":71,"column":71},"source":"keyboard.js","original":{"line":37,"column":90}},{"generated":{"line":71,"column":75},"source":"keyboard.js","original":{"line":37,"column":72}},{"generated":{"line":71,"column":76},"source":"keyboard.js","original":{"line":37,"column":40}},{"generated":{"line":72,"column":0},"source":"keyboard.js","original":{"line":37,"column":40}},{"generated":{"line":72,"column":17},"source":"keyboard.js","original":{"line":37,"column":12}},{"name":"addEventListener","generated":{"line":73,"column":0},"source":"keyboard.js","original":{"line":38,"column":12}},{"generated":{"line":73,"column":33},"source":"keyboard.js","original":{"line":38,"column":29}},{"generated":{"line":73,"column":40},"source":"keyboard.js","original":{"line":38,"column":12}},{"generated":{"line":73,"column":42},"source":"keyboard.js","original":{"line":38,"column":38}},{"generated":{"line":74,"column":0},"source":"keyboard.js","original":{"line":38,"column":38}},{"name":"actions","generated":{"line":74,"column":27},"source":"keyboard.js","original":{"line":38,"column":44}},{"name":"release","generated":{"line":74,"column":35},"source":"keyboard.js","original":{"line":38,"column":52}},{"generated":{"line":74,"column":42},"source":"keyboard.js","original":{"line":38,"column":44}},{"name":"ev","generated":{"line":74,"column":43},"source":"keyboard.js","original":{"line":38,"column":60}},{"name":"key","generated":{"line":74,"column":46},"source":"keyboard.js","original":{"line":38,"column":63}},{"generated":{"line":74,"column":49},"source":"keyboard.js","original":{"line":38,"column":44}},{"name":"ev","generated":{"line":74,"column":54},"source":"keyboard.js","original":{"line":38,"column":71}},{"name":"preventDefault","generated":{"line":74,"column":57},"source":"keyboard.js","original":{"line":38,"column":74}},{"generated":{"line":74,"column":71},"source":"keyboard.js","original":{"line":38,"column":71}},{"generated":{"line":74,"column":72},"source":"keyboard.js","original":{"line":38,"column":89}},{"generated":{"line":74,"column":76},"source":"keyboard.js","original":{"line":38,"column":71}},{"generated":{"line":74,"column":77},"source":"keyboard.js","original":{"line":38,"column":38}},{"generated":{"line":75,"column":0},"source":"keyboard.js","original":{"line":38,"column":38}},{"generated":{"line":75,"column":17},"source":"keyboard.js","original":{"line":38,"column":12}},{"generated":{"line":76,"column":0},"source":"keyboard.js","original":{"line":39,"column":12}},{"generated":{"line":76,"column":23},"source":"keyboard.js","original":{"line":39,"column":19}},{"name":"onattack","generated":{"line":77,"column":0},"source":"keyboard.js","original":{"line":40,"column":16}},{"name":"onattack","generated":{"line":77,"column":30},"source":"keyboard.js","original":{"line":40,"column":26}},{"generated":{"line":77,"column":42},"source":"keyboard.js","original":{"line":40,"column":39}},{"generated":{"line":77,"column":55},"source":"keyboard.js","original":{"line":40,"column":44}},{"generated":{"line":77,"column":56},"source":"keyboard.js","original":{"line":40,"column":46}},{"generated":{"line":77,"column":57},"source":"keyboard.js","original":{"line":39,"column":19}},{"name":"onrelease","generated":{"line":78,"column":0},"source":"keyboard.js","original":{"line":41,"column":16}},{"name":"onrelease","generated":{"line":78,"column":31},"source":"keyboard.js","original":{"line":41,"column":27}},{"generated":{"line":78,"column":44},"source":"keyboard.js","original":{"line":41,"column":41}},{"generated":{"line":78,"column":57},"source":"keyboard.js","original":{"line":41,"column":46}},{"generated":{"line":78,"column":58},"source":"keyboard.js","original":{"line":41,"column":48}},{"generated":{"line":79,"column":0},"source":"keyboard.js","original":{"line":39,"column":19}},{"generated":{"line":79,"column":17},"source":"keyboard.js","original":{"line":39,"column":12}},{"generated":{"line":80,"column":0},"source":"keyboard.js","original":{"line":43,"column":9}},{"generated":{"line":80,"column":13},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":81,"column":0},"source":"keyboard.js","original":{"line":36,"column":14}},{"generated":{"line":81,"column":9},"source":"keyboard.js","original":{"line":34,"column":13}},{"name":"attack","generated":{"line":83,"column":0},"source":"keyboard.js","original":{"line":45,"column":8}},{"generated":{"line":83,"column":16},"source":"keyboard.js","original":{"line":45,"column":16}},{"generated":{"line":84,"column":0},"source":"keyboard.js","original":{"line":45,"column":16}},{"generated":{"line":84,"column":19},"source":"keyboard.js","original":{"line":45,"column":24}},{"generated":{"line":84,"column":36},"source":"keyboard.js","original":{"line":45,"column":33}},{"generated":{"line":85,"column":0},"source":"keyboard.js","original":{"line":46,"column":12}},{"name":"note","generated":{"line":85,"column":20},"source":"keyboard.js","original":{"line":46,"column":18}},{"generated":{"line":85,"column":27},"source":"keyboard.js","original":{"line":46,"column":25}},{"name":"indexOf","generated":{"line":85,"column":48},"source":"keyboard.js","original":{"line":46,"column":39}},{"generated":{"line":85,"column":55},"source":"keyboard.js","original":{"line":46,"column":25}},{"name":"char","generated":{"line":85,"column":56},"source":"keyboard.js","original":{"line":46,"column":47}},{"generated":{"line":85,"column":60},"source":"keyboard.js","original":{"line":46,"column":25}},{"generated":{"line":85,"column":61},"source":"keyboard.js","original":{"line":46,"column":12}},{"generated":{"line":86,"column":0},"source":"keyboard.js","original":{"line":47,"column":12}},{"name":"note","generated":{"line":86,"column":20},"source":"keyboard.js","original":{"line":47,"column":16}},{"generated":{"line":86,"column":29},"source":"keyboard.js","original":{"line":47,"column":25}},{"generated":{"line":86,"column":30},"source":"keyboard.js","original":{"line":47,"column":26}},{"generated":{"line":86,"column":31},"source":"keyboard.js","original":{"line":47,"column":12}},{"generated":{"line":86,"column":33},"source":"keyboard.js","original":{"line":47,"column":29}},{"generated":{"line":87,"column":0},"source":"keyboard.js","original":{"line":48,"column":12}},{"name":"char","generated":{"line":87,"column":20},"source":"keyboard.js","original":{"line":48,"column":16}},{"name":"state","generated":{"line":87,"column":29},"source":"keyboard.js","original":{"line":48,"column":25}},{"name":"pressed","generated":{"line":87,"column":35},"source":"keyboard.js","original":{"line":48,"column":31}},{"generated":{"line":87,"column":42},"source":"keyboard.js","original":{"line":48,"column":12}},{"generated":{"line":87,"column":44},"source":"keyboard.js","original":{"line":48,"column":40}},{"generated":{"line":88,"column":0},"source":"keyboard.js","original":{"line":49,"column":12}},{"name":"char","generated":{"line":88,"column":20},"source":"keyboard.js","original":{"line":49,"column":16}},{"name":"state","generated":{"line":88,"column":29},"source":"keyboard.js","original":{"line":49,"column":25}},{"name":"pressed","generated":{"line":88,"column":35},"source":"keyboard.js","original":{"line":49,"column":31}},{"generated":{"line":88,"column":42},"source":"keyboard.js","original":{"line":49,"column":12}},{"name":"state","generated":{"line":88,"column":44},"source":"keyboard.js","original":{"line":49,"column":40}},{"name":"onattack","generated":{"line":88,"column":50},"source":"keyboard.js","original":{"line":49,"column":46}},{"generated":{"line":88,"column":58},"source":"keyboard.js","original":{"line":49,"column":40}},{"name":"note","generated":{"line":88,"column":59},"source":"keyboard.js","original":{"line":49,"column":55}},{"generated":{"line":88,"column":63},"source":"keyboard.js","original":{"line":49,"column":40}},{"generated":{"line":89,"column":0},"source":"keyboard.js","original":{"line":50,"column":12}},{"generated":{"line":89,"column":23},"source":"keyboard.js","original":{"line":50,"column":19}},{"name":"pressed","generated":{"line":89,"column":25},"source":"keyboard.js","original":{"line":50,"column":20}},{"name":"char","generated":{"line":89,"column":34},"source":"keyboard.js","original":{"line":50,"column":29}},{"generated":{"line":89,"column":38},"source":"keyboard.js","original":{"line":50,"column":19}},{"generated":{"line":89,"column":40},"source":"keyboard.js","original":{"line":50,"column":12}},{"generated":{"line":90,"column":0},"source":"keyboard.js","original":{"line":51,"column":9}},{"generated":{"line":90,"column":13},"source":"keyboard.js","original":{"line":45,"column":16}},{"generated":{"line":91,"column":0},"source":"keyboard.js","original":{"line":45,"column":16}},{"generated":{"line":91,"column":9},"source":"keyboard.js","original":{"line":34,"column":13}},{"name":"release","generated":{"line":93,"column":0},"source":"keyboard.js","original":{"line":53,"column":8}},{"generated":{"line":93,"column":17},"source":"keyboard.js","original":{"line":53,"column":17}},{"generated":{"line":94,"column":0},"source":"keyboard.js","original":{"line":53,"column":17}},{"generated":{"line":94,"column":19},"source":"keyboard.js","original":{"line":53,"column":25}},{"generated":{"line":94,"column":36},"source":"keyboard.js","original":{"line":53,"column":34}},{"generated":{"line":95,"column":0},"source":"keyboard.js","original":{"line":54,"column":12}},{"name":"note","generated":{"line":95,"column":20},"source":"keyboard.js","original":{"line":54,"column":18}},{"generated":{"line":95,"column":27},"source":"keyboard.js","original":{"line":54,"column":25}},{"name":"indexOf","generated":{"line":95,"column":48},"source":"keyboard.js","original":{"line":54,"column":39}},{"generated":{"line":95,"column":55},"source":"keyboard.js","original":{"line":54,"column":25}},{"name":"char","generated":{"line":95,"column":56},"source":"keyboard.js","original":{"line":54,"column":47}},{"generated":{"line":95,"column":60},"source":"keyboard.js","original":{"line":54,"column":25}},{"generated":{"line":95,"column":61},"source":"keyboard.js","original":{"line":54,"column":12}},{"generated":{"line":96,"column":0},"source":"keyboard.js","original":{"line":55,"column":12}},{"name":"note","generated":{"line":96,"column":20},"source":"keyboard.js","original":{"line":55,"column":16}},{"generated":{"line":96,"column":29},"source":"keyboard.js","original":{"line":55,"column":25}},{"generated":{"line":96,"column":30},"source":"keyboard.js","original":{"line":55,"column":26}},{"generated":{"line":96,"column":31},"source":"keyboard.js","original":{"line":55,"column":12}},{"generated":{"line":96,"column":33},"source":"keyboard.js","original":{"line":55,"column":29}},{"generated":{"line":97,"column":0},"source":"keyboard.js","original":{"line":56,"column":12}},{"name":"char","generated":{"line":97,"column":20},"source":"keyboard.js","original":{"line":56,"column":16}},{"name":"state","generated":{"line":97,"column":29},"source":"keyboard.js","original":{"line":56,"column":25}},{"name":"pressed","generated":{"line":97,"column":35},"source":"keyboard.js","original":{"line":56,"column":31}},{"generated":{"line":97,"column":42},"source":"keyboard.js","original":{"line":56,"column":12}},{"generated":{"line":97,"column":44},"source":"keyboard.js","original":{"line":56,"column":40}},{"generated":{"line":98,"column":0},"source":"keyboard.js","original":{"line":57,"column":12}},{"name":"char","generated":{"line":98,"column":20},"source":"keyboard.js","original":{"line":57,"column":16}},{"name":"state","generated":{"line":98,"column":29},"source":"keyboard.js","original":{"line":57,"column":25}},{"name":"pressed","generated":{"line":98,"column":35},"source":"keyboard.js","original":{"line":57,"column":31}},{"generated":{"line":98,"column":42},"source":"keyboard.js","original":{"line":57,"column":12}},{"name":"state","generated":{"line":98,"column":44},"source":"keyboard.js","original":{"line":57,"column":40}},{"name":"onrelease","generated":{"line":98,"column":50},"source":"keyboard.js","original":{"line":57,"column":46}},{"generated":{"line":98,"column":59},"source":"keyboard.js","original":{"line":57,"column":40}},{"name":"note","generated":{"line":98,"column":60},"source":"keyboard.js","original":{"line":57,"column":56}},{"generated":{"line":98,"column":64},"source":"keyboard.js","original":{"line":57,"column":40}},{"generated":{"line":99,"column":0},"source":"keyboard.js","original":{"line":58,"column":12}},{"generated":{"line":99,"column":23},"source":"keyboard.js","original":{"line":58,"column":19}},{"name":"pressed","generated":{"line":99,"column":25},"source":"keyboard.js","original":{"line":58,"column":20}},{"generated":{"line":99,"column":34},"source":"keyboard.js","original":{"line":58,"column":29}},{"generated":{"line":99,"column":38},"source":"keyboard.js","original":{"line":58,"column":19}},{"generated":{"line":99,"column":40},"source":"keyboard.js","original":{"line":58,"column":12}},{"generated":{"line":100,"column":0},"source":"keyboard.js","original":{"line":59,"column":9}},{"generated":{"line":100,"column":13},"source":"keyboard.js","original":{"line":53,"column":17}},{"generated":{"line":101,"column":0},"source":"keyboard.js","original":{"line":53,"column":17}},{"generated":{"line":102,"column":0},"source":"keyboard.js","original":{"line":34,"column":13}},{"generated":{"line":102,"column":5},"source":"keyboard.js","original":{"line":29,"column":15}},{"name":"view","generated":{"line":104,"column":0},"source":"keyboard.js","original":{"line":62,"column":4}},{"generated":{"line":104,"column":10},"source":"keyboard.js","original":{"line":62,"column":10}},{"name":"state","generated":{"line":104,"column":24},"source":"keyboard.js","original":{"line":62,"column":11}},{"generated":{"line":104,"column":29},"source":"keyboard.js","original":{"line":62,"column":10}},{"name":"actions","generated":{"line":104,"column":31},"source":"keyboard.js","original":{"line":62,"column":18}},{"generated":{"line":104,"column":38},"source":"keyboard.js","original":{"line":62,"column":10}},{"generated":{"line":105,"column":0},"source":"keyboard.js","original":{"line":62,"column":10}},{"generated":{"line":105,"column":15},"source":"keyboard.js","original":{"line":62,"column":31}},{"name":"Keyboard","generated":{"line":106,"column":0},"source":"keyboard.js","original":{"line":63,"column":8}},{"generated":{"line":106,"column":22},"source":"keyboard.js","original":{"line":63,"column":18}},{"generated":{"line":107,"column":0},"source":"keyboard.js","original":{"line":63,"column":18}},{"name":"Keyboard","generated":{"line":107,"column":23},"source":"keyboard.js","original":{"line":63,"column":23}},{"generated":{"line":107,"column":33},"source":"keyboard.js","original":{"line":63,"column":32}},{"name":"attack","generated":{"line":108,"column":0},"source":"keyboard.js","original":{"line":64,"column":12}},{"name":"actions","generated":{"line":108,"column":28},"source":"keyboard.js","original":{"line":64,"column":20}},{"name":"attack","generated":{"line":108,"column":36},"source":"keyboard.js","original":{"line":64,"column":28}},{"generated":{"line":108,"column":42},"source":"keyboard.js","original":{"line":63,"column":32}},{"name":"release","generated":{"line":109,"column":0},"source":"keyboard.js","original":{"line":65,"column":12}},{"name":"actions","generated":{"line":109,"column":29},"source":"keyboard.js","original":{"line":65,"column":21}},{"name":"release","generated":{"line":109,"column":37},"source":"keyboard.js","original":{"line":65,"column":29}},{"generated":{"line":109,"column":44},"source":"keyboard.js","original":{"line":63,"column":32}},{"name":"pressed","generated":{"line":110,"column":0},"source":"keyboard.js","original":{"line":66,"column":12}},{"name":"state","generated":{"line":110,"column":29},"source":"keyboard.js","original":{"line":66,"column":21}},{"name":"pressed","generated":{"line":110,"column":35},"source":"keyboard.js","original":{"line":66,"column":27}},{"generated":{"line":111,"column":0},"source":"keyboard.js","original":{"line":63,"column":32}},{"generated":{"line":111,"column":17},"source":"keyboard.js","original":{"line":63,"column":23}},{"generated":{"line":111,"column":18},"source":"keyboard.js","original":{"line":63,"column":18}},{"generated":{"line":112,"column":0},"source":"keyboard.js","original":{"line":63,"column":18}},{"generated":{"line":113,"column":0},"source":"keyboard.js","original":{"line":62,"column":31}},{"generated":{"line":113,"column":9},"source":"keyboard.js","original":{"line":62,"column":10}},{"generated":{"line":114,"column":0},"source":"keyboard.js","original":{"line":62,"column":10}},{"generated":{"line":115,"column":0},"source":"keyboard.js","original":{"line":29,"column":15}}],"sources":{"keyboard.js":"import {h} from 'hyperapp'\nimport cc from 'classcat'\nimport {KEYBOARD_KEYS, KEYBOARD_BLACK_KEYS} from './const'\nconst isBlack  = char =>  KEYBOARD_BLACK_KEYS.indexOf(char) > -1\n\nconst noteForChar = function (char) {\n    const n = KEYBOARD_KEYS.indexOf(char)\n    return n > -1 ? n : null\n}\n\nconst Keyboard = ({pressed, attack, release}) => (\n    <div class=\"keyboard\" key=\"keyboard\">\n        {KEYBOARD_KEYS.map(char => (\n        <div\n            class={cc(['clav', {\n                white: !isBlack(char),\n                black: isBlack(char),\n                pressed: char === pressed,\n            }])}\n            onmousedown={ ev => attack(char) }\n            onmouseup={ ev => release(char) }\n        >\n            <span class=\"char\">{char.toUpperCase()}</span>\n        </div>\n        ))}\n    </div>\n)\n\nexport default {\n    state: {\n        pressed: null\n    },\n\n    actions: {\n        \n        init: ({onattack, onrelease}) => (state, actions) => {\n            addEventListener('keydown', ev => actions.attack(ev.key) && ev.preventDefault(true))\n            addEventListener('keyup', ev => actions.release(ev.key) && ev.preventDefault(true))\n            return {\n                onattack: onattack || (_ => {}),\n                onrelease: onrelease || (_ => {}),\n            }\n        },\n        \n        attack: char => state => {\n            const note = KEYBOARD_KEYS.indexOf(char)\n            if (note === -1) return\n            if (char === state.pressed) return\n            if (char !== state.pressed) state.onattack(note)\n            return {pressed: char}\n        },\n\n        release: char => state => {\n            const note = KEYBOARD_KEYS.indexOf(char)\n            if (note === -1) return\n            if (char !== state.pressed) return\n            if (char === state.pressed) state.onrelease(note)\n            return {pressed: null}\n        }\n    },\n\n    view: (state, actions) => ({\n        Keyboard: _ => Keyboard({\n            attack: actions.attack,\n            release: actions.release,\n            pressed: state.pressed,\n        })\n    })\n}\n"},"lineCount":null}},"hash":"a4a777cd16b8edf78c76e602792f5ed4","cacheData":{"env":{}}}