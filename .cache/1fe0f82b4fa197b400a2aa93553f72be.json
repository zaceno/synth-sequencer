{"dependencies":[{"name":"/Users/zache/Code/synth-sequencer/.babelrc","includedInParent":true,"mtime":1521074738409},{"name":"/Users/zache/Code/synth-sequencer/package.json","includedInParent":true,"mtime":1521132316933},{"name":"hyperapp","loc":{"line":1,"column":16}},{"name":"./const","loc":{"line":2,"column":63}},{"name":"./selection","loc":{"line":3,"column":50}},{"name":"./playback","loc":{"line":4,"column":21}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _hyperapp = require('hyperapp');\n\nvar _const = require('./const');\n\nvar _selection = require('./selection');\n\nvar _playback = require('./playback');\n\nvar _playback2 = _interopRequireDefault(_playback);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar noteName = function noteName(note) {\n    return note === null ? '' : _const.NOTE_NAMES[note];\n};\n\nexports.default = {\n    modules: {\n        selection: (0, _selection.module)(),\n        playback: (0, _playback2.default)()\n    },\n    state: { notes: [].concat(_toConsumableArray(Array(_const.SEQUENCER_LENGTH).keys())).map(function (_) {\n            return [].concat(_toConsumableArray(Array(8).keys())).map(function (_) {\n                return null;\n            });\n        }) },\n    actions: {\n\n        init: function init(_ref) {\n            var onselectvoice = _ref.onselectvoice,\n                onattackvoice = _ref.onattackvoice,\n                onstop = _ref.onstop;\n            return function (state, actions) {\n\n                window.addEventListener('keydown', function (ev) {\n                    if (ev.key !== ' ') return;\n                    actions.setNote(null);\n                });\n\n                actions.selection.init({\n                    onselectcolumn: function onselectcolumn(col) {\n                        return onselectvoice('ABCDEFGH'[col]);\n                    }\n                });\n\n                actions.playback.init({\n                    onplayrow: actions.playRow,\n                    onstop: onstop\n                });\n                return { onattackvoice: onattackvoice };\n            };\n        },\n\n        setNote: function setNote(note) {\n            return function (state, actions) {\n                actions.selection.reset();\n                return { notes: (0, _selection.applySelection)(state.selection, state.notes, note) };\n            };\n        },\n\n        playRow: function playRow(row) {\n            return function (state, actions) {\n                state.notes[row].forEach(function (note, col) {\n                    return state.onattackvoice('ABCDEFGH'[col], note);\n                });\n            };\n        }\n    },\n\n    view: function view(state, actions, views) {\n        return {\n            Controls: function Controls(_) {\n                return (0, _hyperapp.h)(\n                    'span',\n                    null,\n                    (0, _hyperapp.h)(views.playback.PlayButton, null),\n                    (0, _hyperapp.h)(views.playback.StopButton, null),\n                    (0, _hyperapp.h)(\n                        'button',\n                        { onclick: function onclick(_) {\n                                return actions.setNote(null);\n                            } },\n                        'X'\n                    )\n                );\n            },\n            Sequencer: function Sequencer(_) {\n                return (0, _hyperapp.h)(\n                    'table',\n                    { 'class': 'sequencer' },\n                    state.notes.map(function (vals, row) {\n                        return (0, _hyperapp.h)(\n                            'tr',\n                            null,\n                            (0, _hyperapp.h)(\n                                'td',\n                                { onclick: function onclick(_) {\n                                        return actions.playback.setRow(row);\n                                    }, 'class': \"time\" + (state.playback.row === row ? 'playing' : '') },\n                                row\n                            ),\n                            vals.map(function (note, col) {\n                                return (0, _hyperapp.h)(\n                                    views.selection.Decorator,\n                                    { row: row, col: col },\n                                    (0, _hyperapp.h)(\n                                        'td',\n                                        { 'class': state.playback.row === row ? 'playing' : false },\n                                        noteName(note)\n                                    )\n                                );\n                            })\n                        );\n                    })\n                );\n            }\n        };\n    }\n};","map":{"mappings":[{"generated":{"line":7,"column":0},"source":"sequencer.js","original":{"line":1,"column":0}},{"generated":{"line":9,"column":0},"source":"sequencer.js","original":{"line":2,"column":0}},{"generated":{"line":11,"column":0},"source":"sequencer.js","original":{"line":3,"column":0}},{"generated":{"line":13,"column":0},"source":"sequencer.js","original":{"line":4,"column":0}},{"generated":{"line":21,"column":0},"source":"sequencer.js","original":{"line":6,"column":0}},{"name":"noteName","generated":{"line":21,"column":4},"source":"sequencer.js","original":{"line":6,"column":6}},{"generated":{"line":21,"column":15},"source":"sequencer.js","original":{"line":6,"column":17}},{"name":"noteName","generated":{"line":21,"column":24},"source":"sequencer.js","original":{"line":6,"column":6}},{"generated":{"line":21,"column":32},"source":"sequencer.js","original":{"line":6,"column":17}},{"generated":{"line":21,"column":39},"source":"sequencer.js","original":{"line":6,"column":25}},{"generated":{"line":22,"column":0},"source":"sequencer.js","original":{"line":7,"column":4}},{"name":"note","generated":{"line":22,"column":11},"source":"sequencer.js","original":{"line":7,"column":13}},{"generated":{"line":22,"column":20},"source":"sequencer.js","original":{"line":7,"column":22}},{"generated":{"line":22,"column":24},"source":"sequencer.js","original":{"line":7,"column":12}},{"generated":{"line":22,"column":27},"source":"sequencer.js","original":{"line":7,"column":30}},{"generated":{"line":22,"column":29},"source":"sequencer.js","original":{"line":7,"column":12}},{"generated":{"line":22,"column":32},"source":"sequencer.js","original":{"line":7,"column":35}},{"name":"note","generated":{"line":22,"column":50},"source":"sequencer.js","original":{"line":7,"column":46}},{"generated":{"line":22,"column":54},"source":"sequencer.js","original":{"line":7,"column":35}},{"generated":{"line":22,"column":55},"source":"sequencer.js","original":{"line":7,"column":4}},{"generated":{"line":23,"column":0},"source":"sequencer.js","original":{"line":8,"column":1}},{"generated":{"line":23,"column":1},"source":"sequencer.js","original":{"line":6,"column":0}},{"generated":{"line":25,"column":18},"source":"sequencer.js","original":{"line":12,"column":15}},{"name":"modules","generated":{"line":26,"column":0},"source":"sequencer.js","original":{"line":13,"column":4}},{"generated":{"line":26,"column":13},"source":"sequencer.js","original":{"line":13,"column":13}},{"name":"selection","generated":{"line":27,"column":0},"source":"sequencer.js","original":{"line":14,"column":8}},{"generated":{"line":27,"column":19},"source":"sequencer.js","original":{"line":14,"column":19}},{"generated":{"line":27,"column":43},"source":"sequencer.js","original":{"line":13,"column":13}},{"name":"playback","generated":{"line":28,"column":0},"source":"sequencer.js","original":{"line":15,"column":8}},{"generated":{"line":28,"column":18},"source":"sequencer.js","original":{"line":15,"column":18}},{"generated":{"line":29,"column":0},"source":"sequencer.js","original":{"line":13,"column":13}},{"generated":{"line":29,"column":5},"source":"sequencer.js","original":{"line":12,"column":15}},{"name":"state","generated":{"line":30,"column":0},"source":"sequencer.js","original":{"line":17,"column":4}},{"generated":{"line":30,"column":11},"source":"sequencer.js","original":{"line":17,"column":11}},{"name":"notes","generated":{"line":30,"column":13},"source":"sequencer.js","original":{"line":17,"column":13}},{"generated":{"line":30,"column":20},"source":"sequencer.js","original":{"line":17,"column":20}},{"name":"Array","generated":{"line":30,"column":49},"source":"sequencer.js","original":{"line":17,"column":24}},{"name":"keys","generated":{"line":30,"column":80},"source":"sequencer.js","original":{"line":17,"column":48}},{"generated":{"line":30,"column":84},"source":"sequencer.js","original":{"line":17,"column":24}},{"generated":{"line":30,"column":86},"source":"sequencer.js","original":{"line":17,"column":20}},{"name":"map","generated":{"line":30,"column":89},"source":"sequencer.js","original":{"line":17,"column":56}},{"generated":{"line":30,"column":92},"source":"sequencer.js","original":{"line":17,"column":20}},{"generated":{"line":30,"column":93},"source":"sequencer.js","original":{"line":17,"column":60}},{"generated":{"line":31,"column":0},"source":"sequencer.js","original":{"line":17,"column":60}},{"generated":{"line":31,"column":19},"source":"sequencer.js","original":{"line":17,"column":65}},{"name":"Array","generated":{"line":31,"column":48},"source":"sequencer.js","original":{"line":17,"column":69}},{"generated":{"line":31,"column":54},"source":"sequencer.js","original":{"line":17,"column":75}},{"generated":{"line":31,"column":55},"source":"sequencer.js","original":{"line":17,"column":69}},{"name":"keys","generated":{"line":31,"column":57},"source":"sequencer.js","original":{"line":17,"column":78}},{"generated":{"line":31,"column":61},"source":"sequencer.js","original":{"line":17,"column":69}},{"generated":{"line":31,"column":63},"source":"sequencer.js","original":{"line":17,"column":65}},{"name":"map","generated":{"line":31,"column":66},"source":"sequencer.js","original":{"line":17,"column":86}},{"generated":{"line":31,"column":69},"source":"sequencer.js","original":{"line":17,"column":65}},{"generated":{"line":31,"column":70},"source":"sequencer.js","original":{"line":17,"column":90}},{"generated":{"line":32,"column":0},"source":"sequencer.js","original":{"line":17,"column":90}},{"generated":{"line":32,"column":23},"source":"sequencer.js","original":{"line":17,"column":95}},{"generated":{"line":32,"column":27},"source":"sequencer.js","original":{"line":17,"column":90}},{"generated":{"line":33,"column":0},"source":"sequencer.js","original":{"line":17,"column":90}},{"generated":{"line":33,"column":13},"source":"sequencer.js","original":{"line":17,"column":65}},{"generated":{"line":33,"column":14},"source":"sequencer.js","original":{"line":17,"column":60}},{"generated":{"line":34,"column":0},"source":"sequencer.js","original":{"line":17,"column":60}},{"generated":{"line":34,"column":9},"source":"sequencer.js","original":{"line":17,"column":20}},{"generated":{"line":34,"column":10},"source":"sequencer.js","original":{"line":17,"column":11}},{"generated":{"line":34,"column":12},"source":"sequencer.js","original":{"line":12,"column":15}},{"name":"actions","generated":{"line":35,"column":0},"source":"sequencer.js","original":{"line":18,"column":4}},{"generated":{"line":35,"column":13},"source":"sequencer.js","original":{"line":18,"column":13}},{"name":"init","generated":{"line":37,"column":0},"source":"sequencer.js","original":{"line":20,"column":8}},{"generated":{"line":37,"column":14},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":38,"column":0},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onselectvoice","generated":{"line":38,"column":16},"source":"sequencer.js","original":{"line":20,"column":16}},{"generated":{"line":38,"column":29},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onselectvoice","generated":{"line":38,"column":37},"source":"sequencer.js","original":{"line":20,"column":16}},{"generated":{"line":38,"column":50},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":39,"column":0},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onattackvoice","generated":{"line":39,"column":16},"source":"sequencer.js","original":{"line":20,"column":31}},{"generated":{"line":39,"column":29},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onattackvoice","generated":{"line":39,"column":37},"source":"sequencer.js","original":{"line":20,"column":31}},{"generated":{"line":39,"column":50},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":40,"column":0},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onstop","generated":{"line":40,"column":16},"source":"sequencer.js","original":{"line":20,"column":46}},{"generated":{"line":40,"column":22},"source":"sequencer.js","original":{"line":20,"column":14}},{"name":"onstop","generated":{"line":40,"column":30},"source":"sequencer.js","original":{"line":20,"column":46}},{"generated":{"line":40,"column":36},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":41,"column":0},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":41,"column":19},"source":"sequencer.js","original":{"line":20,"column":58}},{"name":"state","generated":{"line":41,"column":29},"source":"sequencer.js","original":{"line":20,"column":59}},{"generated":{"line":41,"column":34},"source":"sequencer.js","original":{"line":20,"column":58}},{"name":"actions","generated":{"line":41,"column":36},"source":"sequencer.js","original":{"line":20,"column":66}},{"generated":{"line":41,"column":43},"source":"sequencer.js","original":{"line":20,"column":58}},{"generated":{"line":41,"column":45},"source":"sequencer.js","original":{"line":20,"column":78}},{"name":"window","generated":{"line":43,"column":0},"source":"sequencer.js","original":{"line":22,"column":12}},{"name":"addEventListener","generated":{"line":43,"column":23},"source":"sequencer.js","original":{"line":22,"column":19}},{"generated":{"line":43,"column":39},"source":"sequencer.js","original":{"line":22,"column":12}},{"generated":{"line":43,"column":40},"source":"sequencer.js","original":{"line":22,"column":36}},{"generated":{"line":43,"column":49},"source":"sequencer.js","original":{"line":22,"column":12}},{"generated":{"line":43,"column":51},"source":"sequencer.js","original":{"line":22,"column":47}},{"generated":{"line":43,"column":65},"source":"sequencer.js","original":{"line":22,"column":53}},{"generated":{"line":44,"column":0},"source":"sequencer.js","original":{"line":23,"column":16}},{"name":"ev","generated":{"line":44,"column":24},"source":"sequencer.js","original":{"line":23,"column":20}},{"name":"key","generated":{"line":44,"column":27},"source":"sequencer.js","original":{"line":23,"column":23}},{"generated":{"line":44,"column":30},"source":"sequencer.js","original":{"line":23,"column":20}},{"generated":{"line":44,"column":35},"source":"sequencer.js","original":{"line":23,"column":31}},{"generated":{"line":44,"column":38},"source":"sequencer.js","original":{"line":23,"column":16}},{"generated":{"line":44,"column":40},"source":"sequencer.js","original":{"line":23,"column":36}},{"name":"actions","generated":{"line":45,"column":0},"source":"sequencer.js","original":{"line":24,"column":16}},{"name":"setNote","generated":{"line":45,"column":28},"source":"sequencer.js","original":{"line":24,"column":24}},{"generated":{"line":45,"column":35},"source":"sequencer.js","original":{"line":24,"column":16}},{"generated":{"line":45,"column":36},"source":"sequencer.js","original":{"line":24,"column":32}},{"generated":{"line":45,"column":40},"source":"sequencer.js","original":{"line":24,"column":16}},{"generated":{"line":46,"column":0},"source":"sequencer.js","original":{"line":25,"column":13}},{"generated":{"line":46,"column":17},"source":"sequencer.js","original":{"line":22,"column":12}},{"name":"actions","generated":{"line":48,"column":0},"source":"sequencer.js","original":{"line":27,"column":12}},{"name":"selection","generated":{"line":48,"column":24},"source":"sequencer.js","original":{"line":27,"column":20}},{"generated":{"line":48,"column":33},"source":"sequencer.js","original":{"line":27,"column":12}},{"name":"init","generated":{"line":48,"column":34},"source":"sequencer.js","original":{"line":27,"column":30}},{"generated":{"line":48,"column":38},"source":"sequencer.js","original":{"line":27,"column":12}},{"generated":{"line":48,"column":39},"source":"sequencer.js","original":{"line":27,"column":35}},{"name":"onselectcolumn","generated":{"line":49,"column":0},"source":"sequencer.js","original":{"line":28,"column":16}},{"generated":{"line":49,"column":36},"source":"sequencer.js","original":{"line":28,"column":32}},{"generated":{"line":50,"column":0},"source":"sequencer.js","original":{"line":28,"column":32}},{"name":"onselectvoice","generated":{"line":50,"column":31},"source":"sequencer.js","original":{"line":28,"column":39}},{"generated":{"line":50,"column":45},"source":"sequencer.js","original":{"line":28,"column":53}},{"name":"col","generated":{"line":50,"column":56},"source":"sequencer.js","original":{"line":28,"column":64}},{"generated":{"line":50,"column":59},"source":"sequencer.js","original":{"line":28,"column":53}},{"generated":{"line":50,"column":60},"source":"sequencer.js","original":{"line":28,"column":39}},{"generated":{"line":50,"column":61},"source":"sequencer.js","original":{"line":28,"column":32}},{"generated":{"line":51,"column":0},"source":"sequencer.js","original":{"line":28,"column":32}},{"generated":{"line":52,"column":0},"source":"sequencer.js","original":{"line":27,"column":35}},{"generated":{"line":52,"column":17},"source":"sequencer.js","original":{"line":27,"column":12}},{"name":"actions","generated":{"line":54,"column":0},"source":"sequencer.js","original":{"line":31,"column":12}},{"name":"playback","generated":{"line":54,"column":24},"source":"sequencer.js","original":{"line":31,"column":20}},{"generated":{"line":54,"column":32},"source":"sequencer.js","original":{"line":31,"column":12}},{"name":"init","generated":{"line":54,"column":33},"source":"sequencer.js","original":{"line":31,"column":29}},{"generated":{"line":54,"column":37},"source":"sequencer.js","original":{"line":31,"column":12}},{"generated":{"line":54,"column":38},"source":"sequencer.js","original":{"line":31,"column":34}},{"name":"onplayrow","generated":{"line":55,"column":0},"source":"sequencer.js","original":{"line":32,"column":16}},{"name":"actions","generated":{"line":55,"column":31},"source":"sequencer.js","original":{"line":32,"column":27}},{"name":"playRow","generated":{"line":55,"column":39},"source":"sequencer.js","original":{"line":32,"column":35}},{"generated":{"line":55,"column":46},"source":"sequencer.js","original":{"line":31,"column":34}},{"name":"onstop","generated":{"line":56,"column":0},"source":"sequencer.js","original":{"line":33,"column":16}},{"generated":{"line":57,"column":0},"source":"sequencer.js","original":{"line":31,"column":34}},{"generated":{"line":57,"column":17},"source":"sequencer.js","original":{"line":31,"column":12}},{"generated":{"line":58,"column":0},"source":"sequencer.js","original":{"line":35,"column":12}},{"generated":{"line":58,"column":23},"source":"sequencer.js","original":{"line":35,"column":19}},{"name":"onattackvoice","generated":{"line":58,"column":25},"source":"sequencer.js","original":{"line":35,"column":20}},{"generated":{"line":58,"column":53},"source":"sequencer.js","original":{"line":35,"column":19}},{"generated":{"line":58,"column":55},"source":"sequencer.js","original":{"line":35,"column":12}},{"generated":{"line":59,"column":0},"source":"sequencer.js","original":{"line":36,"column":9}},{"generated":{"line":59,"column":13},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":60,"column":0},"source":"sequencer.js","original":{"line":20,"column":14}},{"generated":{"line":60,"column":9},"source":"sequencer.js","original":{"line":18,"column":13}},{"name":"setNote","generated":{"line":62,"column":0},"source":"sequencer.js","original":{"line":38,"column":8}},{"generated":{"line":62,"column":17},"source":"sequencer.js","original":{"line":38,"column":17}},{"generated":{"line":63,"column":0},"source":"sequencer.js","original":{"line":38,"column":17}},{"generated":{"line":63,"column":19},"source":"sequencer.js","original":{"line":38,"column":25}},{"name":"state","generated":{"line":63,"column":29},"source":"sequencer.js","original":{"line":38,"column":26}},{"generated":{"line":63,"column":34},"source":"sequencer.js","original":{"line":38,"column":25}},{"name":"actions","generated":{"line":63,"column":36},"source":"sequencer.js","original":{"line":38,"column":33}},{"generated":{"line":63,"column":43},"source":"sequencer.js","original":{"line":38,"column":25}},{"generated":{"line":63,"column":45},"source":"sequencer.js","original":{"line":38,"column":45}},{"name":"actions","generated":{"line":64,"column":0},"source":"sequencer.js","original":{"line":39,"column":12}},{"name":"selection","generated":{"line":64,"column":24},"source":"sequencer.js","original":{"line":39,"column":20}},{"generated":{"line":64,"column":33},"source":"sequencer.js","original":{"line":39,"column":12}},{"name":"reset","generated":{"line":64,"column":34},"source":"sequencer.js","original":{"line":39,"column":30}},{"generated":{"line":64,"column":39},"source":"sequencer.js","original":{"line":39,"column":12}},{"generated":{"line":65,"column":0},"source":"sequencer.js","original":{"line":40,"column":12}},{"generated":{"line":65,"column":23},"source":"sequencer.js","original":{"line":40,"column":19}},{"name":"notes","generated":{"line":65,"column":25},"source":"sequencer.js","original":{"line":40,"column":21}},{"generated":{"line":65,"column":32},"source":"sequencer.js","original":{"line":40,"column":28}},{"name":"state","generated":{"line":65,"column":63},"source":"sequencer.js","original":{"line":40,"column":43}},{"name":"selection","generated":{"line":65,"column":69},"source":"sequencer.js","original":{"line":40,"column":49}},{"generated":{"line":65,"column":78},"source":"sequencer.js","original":{"line":40,"column":28}},{"name":"state","generated":{"line":65,"column":80},"source":"sequencer.js","original":{"line":40,"column":60}},{"name":"notes","generated":{"line":65,"column":86},"source":"sequencer.js","original":{"line":40,"column":66}},{"generated":{"line":65,"column":91},"source":"sequencer.js","original":{"line":40,"column":28}},{"name":"note","generated":{"line":65,"column":93},"source":"sequencer.js","original":{"line":40,"column":73}},{"generated":{"line":65,"column":97},"source":"sequencer.js","original":{"line":40,"column":28}},{"generated":{"line":65,"column":98},"source":"sequencer.js","original":{"line":40,"column":19}},{"generated":{"line":65,"column":100},"source":"sequencer.js","original":{"line":40,"column":12}},{"generated":{"line":66,"column":0},"source":"sequencer.js","original":{"line":41,"column":9}},{"generated":{"line":66,"column":13},"source":"sequencer.js","original":{"line":38,"column":17}},{"generated":{"line":67,"column":0},"source":"sequencer.js","original":{"line":38,"column":17}},{"generated":{"line":67,"column":9},"source":"sequencer.js","original":{"line":18,"column":13}},{"name":"playRow","generated":{"line":69,"column":0},"source":"sequencer.js","original":{"line":43,"column":8}},{"generated":{"line":69,"column":17},"source":"sequencer.js","original":{"line":43,"column":17}},{"generated":{"line":70,"column":0},"source":"sequencer.js","original":{"line":43,"column":17}},{"generated":{"line":70,"column":19},"source":"sequencer.js","original":{"line":43,"column":24}},{"name":"state","generated":{"line":70,"column":29},"source":"sequencer.js","original":{"line":43,"column":25}},{"generated":{"line":70,"column":34},"source":"sequencer.js","original":{"line":43,"column":24}},{"name":"actions","generated":{"line":70,"column":36},"source":"sequencer.js","original":{"line":43,"column":32}},{"generated":{"line":70,"column":43},"source":"sequencer.js","original":{"line":43,"column":24}},{"generated":{"line":70,"column":45},"source":"sequencer.js","original":{"line":43,"column":44}},{"name":"state","generated":{"line":71,"column":0},"source":"sequencer.js","original":{"line":44,"column":12}},{"name":"notes","generated":{"line":71,"column":22},"source":"sequencer.js","original":{"line":44,"column":18}},{"generated":{"line":71,"column":27},"source":"sequencer.js","original":{"line":44,"column":12}},{"name":"row","generated":{"line":71,"column":28},"source":"sequencer.js","original":{"line":44,"column":24}},{"generated":{"line":71,"column":31},"source":"sequencer.js","original":{"line":44,"column":12}},{"name":"forEach","generated":{"line":71,"column":33},"source":"sequencer.js","original":{"line":44,"column":29}},{"generated":{"line":71,"column":40},"source":"sequencer.js","original":{"line":44,"column":12}},{"generated":{"line":71,"column":41},"source":"sequencer.js","original":{"line":44,"column":37}},{"name":"note","generated":{"line":71,"column":51},"source":"sequencer.js","original":{"line":44,"column":38}},{"generated":{"line":71,"column":55},"source":"sequencer.js","original":{"line":44,"column":37}},{"name":"col","generated":{"line":71,"column":57},"source":"sequencer.js","original":{"line":44,"column":44}},{"generated":{"line":71,"column":60},"source":"sequencer.js","original":{"line":44,"column":37}},{"generated":{"line":72,"column":0},"source":"sequencer.js","original":{"line":44,"column":37}},{"name":"state","generated":{"line":72,"column":27},"source":"sequencer.js","original":{"line":44,"column":52}},{"name":"onattackvoice","generated":{"line":72,"column":33},"source":"sequencer.js","original":{"line":44,"column":58}},{"generated":{"line":72,"column":46},"source":"sequencer.js","original":{"line":44,"column":52}},{"generated":{"line":72,"column":47},"source":"sequencer.js","original":{"line":44,"column":72}},{"name":"col","generated":{"line":72,"column":58},"source":"sequencer.js","original":{"line":44,"column":83}},{"generated":{"line":72,"column":61},"source":"sequencer.js","original":{"line":44,"column":72}},{"generated":{"line":72,"column":62},"source":"sequencer.js","original":{"line":44,"column":52}},{"name":"note","generated":{"line":72,"column":64},"source":"sequencer.js","original":{"line":44,"column":89}},{"generated":{"line":72,"column":68},"source":"sequencer.js","original":{"line":44,"column":52}},{"generated":{"line":72,"column":69},"source":"sequencer.js","original":{"line":44,"column":37}},{"generated":{"line":73,"column":0},"source":"sequencer.js","original":{"line":44,"column":37}},{"generated":{"line":73,"column":17},"source":"sequencer.js","original":{"line":44,"column":12}},{"generated":{"line":74,"column":0},"source":"sequencer.js","original":{"line":45,"column":9}},{"generated":{"line":74,"column":13},"source":"sequencer.js","original":{"line":43,"column":17}},{"generated":{"line":75,"column":0},"source":"sequencer.js","original":{"line":43,"column":17}},{"generated":{"line":76,"column":0},"source":"sequencer.js","original":{"line":18,"column":13}},{"generated":{"line":76,"column":5},"source":"sequencer.js","original":{"line":12,"column":15}},{"name":"view","generated":{"line":78,"column":0},"source":"sequencer.js","original":{"line":48,"column":4}},{"generated":{"line":78,"column":10},"source":"sequencer.js","original":{"line":48,"column":10}},{"name":"state","generated":{"line":78,"column":24},"source":"sequencer.js","original":{"line":48,"column":11}},{"generated":{"line":78,"column":29},"source":"sequencer.js","original":{"line":48,"column":10}},{"name":"actions","generated":{"line":78,"column":31},"source":"sequencer.js","original":{"line":48,"column":18}},{"generated":{"line":78,"column":38},"source":"sequencer.js","original":{"line":48,"column":10}},{"name":"views","generated":{"line":78,"column":40},"source":"sequencer.js","original":{"line":48,"column":27}},{"generated":{"line":78,"column":45},"source":"sequencer.js","original":{"line":48,"column":10}},{"generated":{"line":79,"column":0},"source":"sequencer.js","original":{"line":48,"column":10}},{"generated":{"line":79,"column":15},"source":"sequencer.js","original":{"line":48,"column":38}},{"name":"Controls","generated":{"line":80,"column":0},"source":"sequencer.js","original":{"line":49,"column":8}},{"generated":{"line":80,"column":22},"source":"sequencer.js","original":{"line":49,"column":18}},{"generated":{"line":81,"column":0},"source":"sequencer.js","original":{"line":49,"column":18}},{"generated":{"line":81,"column":23},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":82,"column":0},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":83,"column":0},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":84,"column":0},"source":"sequencer.js","original":{"line":51,"column":16}},{"generated":{"line":84,"column":37},"source":"sequencer.js","original":{"line":51,"column":17}},{"generated":{"line":84,"column":42},"source":"sequencer.js","original":{"line":51,"column":16}},{"generated":{"line":84,"column":43},"source":"sequencer.js","original":{"line":51,"column":23}},{"generated":{"line":84,"column":51},"source":"sequencer.js","original":{"line":51,"column":16}},{"generated":{"line":84,"column":52},"source":"sequencer.js","original":{"line":51,"column":32}},{"generated":{"line":84,"column":62},"source":"sequencer.js","original":{"line":51,"column":16}},{"generated":{"line":84,"column":69},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":85,"column":0},"source":"sequencer.js","original":{"line":52,"column":16}},{"generated":{"line":85,"column":37},"source":"sequencer.js","original":{"line":52,"column":17}},{"generated":{"line":85,"column":42},"source":"sequencer.js","original":{"line":52,"column":16}},{"generated":{"line":85,"column":43},"source":"sequencer.js","original":{"line":52,"column":23}},{"generated":{"line":85,"column":51},"source":"sequencer.js","original":{"line":52,"column":16}},{"generated":{"line":85,"column":52},"source":"sequencer.js","original":{"line":52,"column":32}},{"generated":{"line":85,"column":62},"source":"sequencer.js","original":{"line":52,"column":16}},{"generated":{"line":85,"column":69},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":86,"column":0},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":87,"column":0},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":88,"column":0},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":88,"column":26},"source":"sequencer.js","original":{"line":53,"column":24}},{"generated":{"line":88,"column":35},"source":"sequencer.js","original":{"line":53,"column":33}},{"generated":{"line":89,"column":0},"source":"sequencer.js","original":{"line":53,"column":33}},{"name":"actions","generated":{"line":89,"column":39},"source":"sequencer.js","original":{"line":53,"column":38}},{"name":"setNote","generated":{"line":89,"column":47},"source":"sequencer.js","original":{"line":53,"column":46}},{"generated":{"line":89,"column":54},"source":"sequencer.js","original":{"line":53,"column":38}},{"generated":{"line":89,"column":55},"source":"sequencer.js","original":{"line":53,"column":54}},{"generated":{"line":89,"column":59},"source":"sequencer.js","original":{"line":53,"column":38}},{"generated":{"line":89,"column":60},"source":"sequencer.js","original":{"line":53,"column":33}},{"generated":{"line":90,"column":0},"source":"sequencer.js","original":{"line":53,"column":33}},{"generated":{"line":90,"column":29},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":91,"column":0},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":92,"column":0},"source":"sequencer.js","original":{"line":53,"column":16}},{"generated":{"line":93,"column":0},"source":"sequencer.js","original":{"line":50,"column":12}},{"generated":{"line":93,"column":17},"source":"sequencer.js","original":{"line":49,"column":18}},{"generated":{"line":94,"column":0},"source":"sequencer.js","original":{"line":49,"column":18}},{"generated":{"line":94,"column":13},"source":"sequencer.js","original":{"line":48,"column":38}},{"name":"Sequencer","generated":{"line":95,"column":0},"source":"sequencer.js","original":{"line":56,"column":8}},{"generated":{"line":95,"column":23},"source":"sequencer.js","original":{"line":56,"column":19}},{"generated":{"line":96,"column":0},"source":"sequencer.js","original":{"line":56,"column":19}},{"generated":{"line":96,"column":23},"source":"sequencer.js","original":{"line":57,"column":12}},{"generated":{"line":97,"column":0},"source":"sequencer.js","original":{"line":57,"column":12}},{"generated":{"line":98,"column":0},"source":"sequencer.js","original":{"line":57,"column":12}},{"generated":{"line":98,"column":22},"source":"sequencer.js","original":{"line":57,"column":19}},{"generated":{"line":98,"column":31},"source":"sequencer.js","original":{"line":57,"column":25}},{"generated":{"line":98,"column":42},"source":"sequencer.js","original":{"line":57,"column":12}},{"name":"state","generated":{"line":99,"column":0},"source":"sequencer.js","original":{"line":58,"column":17}},{"name":"notes","generated":{"line":99,"column":26},"source":"sequencer.js","original":{"line":58,"column":23}},{"generated":{"line":99,"column":31},"source":"sequencer.js","original":{"line":58,"column":17}},{"name":"map","generated":{"line":99,"column":32},"source":"sequencer.js","original":{"line":58,"column":29}},{"generated":{"line":99,"column":35},"source":"sequencer.js","original":{"line":58,"column":17}},{"generated":{"line":99,"column":36},"source":"sequencer.js","original":{"line":58,"column":33}},{"name":"vals","generated":{"line":99,"column":46},"source":"sequencer.js","original":{"line":58,"column":34}},{"generated":{"line":99,"column":50},"source":"sequencer.js","original":{"line":58,"column":33}},{"name":"row","generated":{"line":99,"column":52},"source":"sequencer.js","original":{"line":58,"column":40}},{"generated":{"line":99,"column":55},"source":"sequencer.js","original":{"line":58,"column":33}},{"generated":{"line":100,"column":0},"source":"sequencer.js","original":{"line":58,"column":33}},{"generated":{"line":100,"column":31},"source":"sequencer.js","original":{"line":59,"column":20}},{"generated":{"line":101,"column":0},"source":"sequencer.js","original":{"line":59,"column":20}},{"generated":{"line":102,"column":0},"source":"sequencer.js","original":{"line":59,"column":20}},{"generated":{"line":103,"column":0},"source":"sequencer.js","original":{"line":60,"column":24}},{"generated":{"line":104,"column":0},"source":"sequencer.js","original":{"line":60,"column":24}},{"generated":{"line":105,"column":0},"source":"sequencer.js","original":{"line":60,"column":24}},{"generated":{"line":105,"column":34},"source":"sequencer.js","original":{"line":60,"column":29}},{"generated":{"line":105,"column":43},"source":"sequencer.js","original":{"line":60,"column":38}},{"generated":{"line":106,"column":0},"source":"sequencer.js","original":{"line":60,"column":38}},{"name":"actions","generated":{"line":106,"column":47},"source":"sequencer.js","original":{"line":60,"column":43}},{"name":"playback","generated":{"line":106,"column":55},"source":"sequencer.js","original":{"line":60,"column":51}},{"generated":{"line":106,"column":63},"source":"sequencer.js","original":{"line":60,"column":43}},{"name":"setRow","generated":{"line":106,"column":64},"source":"sequencer.js","original":{"line":60,"column":60}},{"generated":{"line":106,"column":70},"source":"sequencer.js","original":{"line":60,"column":43}},{"name":"row","generated":{"line":106,"column":71},"source":"sequencer.js","original":{"line":60,"column":67}},{"generated":{"line":106,"column":74},"source":"sequencer.js","original":{"line":60,"column":43}},{"generated":{"line":106,"column":75},"source":"sequencer.js","original":{"line":60,"column":38}},{"generated":{"line":107,"column":0},"source":"sequencer.js","original":{"line":60,"column":38}},{"generated":{"line":107,"column":37},"source":"sequencer.js","original":{"line":60,"column":24}},{"generated":{"line":107,"column":39},"source":"sequencer.js","original":{"line":60,"column":73}},{"generated":{"line":107,"column":48},"source":"sequencer.js","original":{"line":60,"column":80}},{"name":"state","generated":{"line":107,"column":58},"source":"sequencer.js","original":{"line":60,"column":90}},{"name":"playback","generated":{"line":107,"column":64},"source":"sequencer.js","original":{"line":60,"column":96}},{"generated":{"line":107,"column":72},"source":"sequencer.js","original":{"line":60,"column":90}},{"name":"row","generated":{"line":107,"column":73},"source":"sequencer.js","original":{"line":60,"column":105}},{"generated":{"line":107,"column":76},"source":"sequencer.js","original":{"line":60,"column":90}},{"name":"row","generated":{"line":107,"column":81},"source":"sequencer.js","original":{"line":60,"column":113}},{"generated":{"line":107,"column":84},"source":"sequencer.js","original":{"line":60,"column":90}},{"generated":{"line":107,"column":87},"source":"sequencer.js","original":{"line":60,"column":119}},{"generated":{"line":107,"column":96},"source":"sequencer.js","original":{"line":60,"column":90}},{"generated":{"line":107,"column":99},"source":"sequencer.js","original":{"line":60,"column":131}},{"generated":{"line":107,"column":101},"source":"sequencer.js","original":{"line":60,"column":80}},{"generated":{"line":107,"column":102},"source":"sequencer.js","original":{"line":60,"column":24}},{"name":"row","generated":{"line":108,"column":0},"source":"sequencer.js","original":{"line":60,"column":137}},{"generated":{"line":109,"column":0},"source":"sequencer.js","original":{"line":60,"column":24}},{"generated":{"line":109,"column":29},"source":"sequencer.js","original":{"line":59,"column":20}},{"name":"vals","generated":{"line":110,"column":0},"source":"sequencer.js","original":{"line":61,"column":25}},{"name":"map","generated":{"line":110,"column":33},"source":"sequencer.js","original":{"line":61,"column":30}},{"generated":{"line":110,"column":36},"source":"sequencer.js","original":{"line":61,"column":25}},{"generated":{"line":110,"column":37},"source":"sequencer.js","original":{"line":61,"column":34}},{"name":"note","generated":{"line":110,"column":47},"source":"sequencer.js","original":{"line":61,"column":35}},{"generated":{"line":110,"column":51},"source":"sequencer.js","original":{"line":61,"column":34}},{"name":"col","generated":{"line":110,"column":53},"source":"sequencer.js","original":{"line":61,"column":41}},{"generated":{"line":110,"column":56},"source":"sequencer.js","original":{"line":61,"column":34}},{"generated":{"line":111,"column":0},"source":"sequencer.js","original":{"line":61,"column":34}},{"generated":{"line":111,"column":39},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":112,"column":0},"source":"sequencer.js","original":{"line":62,"column":29}},{"generated":{"line":112,"column":41},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":112,"column":42},"source":"sequencer.js","original":{"line":62,"column":35}},{"generated":{"line":112,"column":51},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":112,"column":52},"source":"sequencer.js","original":{"line":62,"column":45}},{"generated":{"line":112,"column":61},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":113,"column":0},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":113,"column":38},"source":"sequencer.js","original":{"line":62,"column":55}},{"name":"row","generated":{"line":113,"column":43},"source":"sequencer.js","original":{"line":62,"column":60}},{"generated":{"line":113,"column":46},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":113,"column":48},"source":"sequencer.js","original":{"line":62,"column":65}},{"name":"col","generated":{"line":113,"column":53},"source":"sequencer.js","original":{"line":62,"column":70}},{"generated":{"line":113,"column":56},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":114,"column":0},"source":"sequencer.js","original":{"line":63,"column":32}},{"generated":{"line":115,"column":0},"source":"sequencer.js","original":{"line":63,"column":32}},{"generated":{"line":116,"column":0},"source":"sequencer.js","original":{"line":63,"column":32}},{"generated":{"line":116,"column":42},"source":"sequencer.js","original":{"line":63,"column":36}},{"name":"state","generated":{"line":116,"column":51},"source":"sequencer.js","original":{"line":63,"column":43}},{"name":"playback","generated":{"line":116,"column":57},"source":"sequencer.js","original":{"line":63,"column":49}},{"generated":{"line":116,"column":65},"source":"sequencer.js","original":{"line":63,"column":43}},{"name":"row","generated":{"line":116,"column":66},"source":"sequencer.js","original":{"line":63,"column":58}},{"generated":{"line":116,"column":69},"source":"sequencer.js","original":{"line":63,"column":43}},{"name":"row","generated":{"line":116,"column":74},"source":"sequencer.js","original":{"line":63,"column":66}},{"generated":{"line":116,"column":77},"source":"sequencer.js","original":{"line":63,"column":43}},{"generated":{"line":116,"column":80},"source":"sequencer.js","original":{"line":63,"column":72}},{"generated":{"line":116,"column":89},"source":"sequencer.js","original":{"line":63,"column":43}},{"generated":{"line":116,"column":92},"source":"sequencer.js","original":{"line":63,"column":84}},{"generated":{"line":116,"column":97},"source":"sequencer.js","original":{"line":63,"column":32}},{"name":"noteName","generated":{"line":117,"column":0},"source":"sequencer.js","original":{"line":63,"column":92}},{"name":"note","generated":{"line":117,"column":49},"source":"sequencer.js","original":{"line":63,"column":101}},{"generated":{"line":117,"column":53},"source":"sequencer.js","original":{"line":63,"column":92}},{"generated":{"line":118,"column":0},"source":"sequencer.js","original":{"line":63,"column":32}},{"generated":{"line":119,"column":0},"source":"sequencer.js","original":{"line":62,"column":28}},{"generated":{"line":119,"column":33},"source":"sequencer.js","original":{"line":61,"column":34}},{"generated":{"line":120,"column":0},"source":"sequencer.js","original":{"line":61,"column":34}},{"generated":{"line":120,"column":29},"source":"sequencer.js","original":{"line":61,"column":25}},{"generated":{"line":121,"column":0},"source":"sequencer.js","original":{"line":59,"column":20}},{"generated":{"line":121,"column":25},"source":"sequencer.js","original":{"line":58,"column":33}},{"generated":{"line":122,"column":0},"source":"sequencer.js","original":{"line":58,"column":33}},{"generated":{"line":122,"column":21},"source":"sequencer.js","original":{"line":58,"column":17}},{"generated":{"line":123,"column":0},"source":"sequencer.js","original":{"line":57,"column":12}},{"generated":{"line":123,"column":17},"source":"sequencer.js","original":{"line":56,"column":19}},{"generated":{"line":124,"column":0},"source":"sequencer.js","original":{"line":56,"column":19}},{"generated":{"line":125,"column":0},"source":"sequencer.js","original":{"line":48,"column":38}},{"generated":{"line":125,"column":9},"source":"sequencer.js","original":{"line":48,"column":10}},{"generated":{"line":126,"column":0},"source":"sequencer.js","original":{"line":48,"column":10}},{"generated":{"line":127,"column":0},"source":"sequencer.js","original":{"line":12,"column":15}}],"sources":{"sequencer.js":"import {h} from 'hyperapp'\nimport {NOTE_NAMES, SEQUENCER_INTERVAL, SEQUENCER_LENGTH} from './const'\nimport {module as selection, applySelection} from './selection'\nimport playback from './playback'\n\nconst noteName = note => {\n    return ((note === null) ? '' : NOTE_NAMES[note])\n}\n\n\n\nexport default {\n    modules: {\n        selection: selection(),\n        playback: playback(),\n    },\n    state: { notes: [...Array(SEQUENCER_LENGTH).keys()].map(_ => [...Array(8).keys()].map(_ => null)) },\n    actions: {\n\n        init: ({onselectvoice, onattackvoice, onstop}) => (state, actions) => {\n\n            window.addEventListener('keydown', ev => {\n                if (ev.key !== ' ') return\n                actions.setNote(null)\n            })\n\n            actions.selection.init({\n                onselectcolumn: col => onselectvoice('ABCDEFGH'[col])\n            })\n\n            actions.playback.init({\n                onplayrow: actions.playRow,\n                onstop,\n            })\n            return {onattackvoice}\n        },\n\n        setNote: note => (state, actions) => {\n            actions.selection.reset()\n            return { notes: applySelection(state.selection, state.notes, note) }\n        },\n\n        playRow: row => (state, actions) => {\n            state.notes[row].forEach((note, col) => state.onattackvoice('ABCDEFGH'[col], note))\n        },\n    },\n\n    view: (state, actions, views) => ({\n        Controls: _ => (\n            <span>\n                <views.playback.PlayButton />\n                <views.playback.StopButton />\n                <button onclick={_ => actions.setNote(null)}>X</button>\n            </span>\n        ),\n        Sequencer: _ => (\n            <table class=\"sequencer\">\n                {state.notes.map((vals, row) => (\n                    <tr>\n                        <td  onclick={_ => actions.playback.setRow(row)} class={\"time\" + (state.playback.row === row ? 'playing' : '')}>{row}</td>\n                        {vals.map((note, col) => (\n                            <views.selection.Decorator row={row} col={col}>\n                                <td class={state.playback.row === row ? 'playing' : false}>{noteName(note)}</td>\n                            </views.selection.Decorator>\n                        ))}\n                    </tr>\n                ))}\n            </table>\n        )\n    })\n}\n"},"lineCount":null}},"hash":"6a1bc496b3d93cbcbc12ca3aac6f5b24","cacheData":{"env":{}}}